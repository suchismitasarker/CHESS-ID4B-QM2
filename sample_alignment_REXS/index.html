<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://example.com/sample_alignment_REXS/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>REXS - CHESS ID4B QM2</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "REXS";
        var mkdocs_page_input_path = "sample_alignment_REXS.md";
        var mkdocs_page_url = "/sample_alignment_REXS/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-ABC123"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', "G-ABC123");
      </script>
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> CHESS ID4B QM2
        </a>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Home</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="..">Welcome</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">User Guide</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../introduction/">Introduction</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../beamline_parameters/">Beamline information</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../SPEC_commands/">ID4B-SPEC commands</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="#">Sample information</a>
    <ul class="current">
                <li class="toctree-l3"><a class="reference internal" href="../sample_env/">Sample environment</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../sample/">Sample mount</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../beamline_basics/">Beamline basics</a>
                </li>
                <li class="toctree-l3 current"><a class="reference internal current" href="#">Sample alignment</a>
    <ul class="current">
                <li class="toctree-l4"><a class="reference internal" href="../sample_alignment_HDRM/">HDRM</a>
                </li>
                <li class="toctree-l4 current"><a class="reference internal current" href="./">REXS</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../temp/">Temperature switch</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../gas_flow/">Gas flow control</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">Data Analysis</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../ID4B_Codes/">Data processing</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../ID4B_Codes_general_nodes/">General node</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../nxrefine_General_Node/">NxRefine General Node</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../nxrefine/">NxRefine</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="#">Data visualization</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../nexpy/">NeXpy</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../pymca/">pyMCA</a>
                </li>
    </ul>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">Beamline equipments</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../PTZ_camera/">Cameras</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../diffractometer/">Diffractometer</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../cryocooler/">Cryocooler</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../detector_information/">Detector</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../publications/">Publication</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Troubleshooting</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../IC1_signal/">IC1 signal issues</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../controlC_question/">Control C Questions</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../beam_dump/">Beam dump</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../lost_fourc/">Missing SPEC</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../camera_image_stuck/">Camera image stuck</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../nexpy_crushed/">NexPy crushed</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../lower_diode_signal/">Lower diode signal</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../cryo_fail/">Cryostream sudden failure</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../comp_issues/">Computer Issues</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Admin Documentation</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../beamline_setup/">Beamline setup</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Cryostat/">Cryostat</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../energy_change/">Energy change</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../SPEC_macros/">SPEC macro</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Frequently Asked Questions (FAQ)</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../information/">Before coming to the beamline</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../FAQ/">Beamline Frequently Asked Questions</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">About</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../about/">About</a>
                </li>
                <li class="toctree-l2"><a class="" href="../license.md">License</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="" href="../release-notes.md">Release Notes</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">CHESS ID4B QM2</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Home</li>
          <li class="breadcrumb-item">User Guide</li>
          <li class="breadcrumb-item">Sample information</li>
          <li class="breadcrumb-item">Sample alignment</li>
      <li class="breadcrumb-item active">REXS</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/suchismitasarker/CHESS-ID4B-QM2/blob/main/README.md/edit/master/docs/sample_alignment_REXS.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <div><div class="admonition danger">
<p class="admonition-title">Resonant Elastic X-ray Scattering (REXS)</p>
</div>
<p>Number of elements in the periodic table (K and L edges)</p>
<figure>
<p><img alt="Image title" src="https://github.com/suchismitasarker/CHESS-ID4B-QM2/blob/main/pictures/QM2b%20-%20REXS.png?raw=true" width="500"></p>
</figure>
<h5 id="basic-theory-rexs">Basic Theory - REXS<a class="headerlink" href="#basic-theory-rexs" title="Permanent link">¶</a></h5>
<h5 id="basic-steps-for-sample-alignments-rexs">Basic steps for sample alignments - REXS<a class="headerlink" href="#basic-steps-for-sample-alignments-rexs" title="Permanent link">¶</a></h5>
<p></p>
<h3 id="beamsplitting-polarimeter">Beamsplitting polarimeter<a class="headerlink" href="#beamsplitting-polarimeter" title="Permanent link">¶</a></h3>
<p>The polarization analyzer isolates and measures a unique series of diffraction resonances at the different K-edge.</p>
<h4 id="important-spec-commands-for-rexs">Important SPEC commands for REXS<a class="headerlink" href="#important-spec-commands-for-rexs" title="Permanent link">¶</a></h4>
<p>Opening and closing the shutter</p>
<ul>
<li><code>opens</code> - Opening the shutter</li>
<li><code>closes</code> - Closing the shutter</li>
</ul>
<p>Pilatus video on and off</p>
<ul>
<li><code>pil_von</code> - Turn pilatus video 'on'</li>
<li><code>pil_voff</code> - Turn pilatus video 'off'</li>
</ul>
<p>Position of the displex</p>
<ul>
<li><code>wm cryx</code> - where motor for displex in 'x' directions</li>
<li><code>wm cryy</code> - where motor for displex in 'y' directions</li>
<li><code>wm cryy</code> - where motor for displex in 'y' directions</li>
</ul>
<p>Get the height correct for the sample </p>
<ul>
<li><code>opens; lup cryz -0.4 0.4 20 0.2; closes</code> - open the shutter and perform the sample scan in the z directions</li>
<li><code>umv cryz CEN</code>- it will go to the center position</li>
</ul>
<p>Get the theta correct for the sample </p>
<ul>
<li><code>umv th 10</code>- Move theta to 10 degrees</li>
<li><code>opens; lup cryz -0.4 0.4 20 0.2; closes</code> - open the shutter and perform the sample scan in the z directions</li>
</ul>
<p>Calulate the motor position in a given point in the reciprocal space</p>
<ul>
<li><code>setlat</code> - set lattice paramter information (a, b, c, alpha, beta, gamma) </li>
<li><code>pa</code> - it will show the orientation matrix</li>
<li><code>ca</code>          - calculate motor settings for a given point in reciprocal space</li>
<li><code>ca 0 0 20</code> - Calculate the theta, 2theta, chi, and phi for the structural peak (0 0 20)</li>
<li><code>br</code> - br and <code>ubr</code> - move to the reciprocal space coordinates (HKL)</li>
<li><code>ubr 0 0 20</code> - Go to the peak (0 0 20)</li>
<li><code>or0 0 0 20</code> - To put the peaks (0 0 20) as first element of the orientation matrix</li>
<li><code>or1 0 0 18</code> - To put the peaks (0 0 18) as first element of the orientation matrix</li>
</ul>
<p>Moving energy above and below the resonance, perform energyscan </p>
<ul>
<li><code>moveE 11.216</code> - move the energy for the sample Ir L edge</li>
<li><code>getE</code> - Get energy</li>
<li><code>matchUE 3</code> -  the undulator 3rd harmonic match with the energy</li>
<li><code>lscan L-0.1 L+0.1 50 0.5</code> or <code>lscan 19.9 20.1 50 0.5</code> -  Lscan in a range of 0.2, with 50 steps, and 0.5 sec/step</li>
<li><code>timescan 5</code> - it is a timescan with 1 datapoint in 5 seconds</li>
<li><code>opens; EUQscan 11.2 11.24 40 3 3; closes</code> : Energyscan to get the edge</li>
</ul>
<p>Moving the energy to the off-resonance </p>
<ul>
<li><code>moveE 11.23</code>- Moves to 11.23 keV from current energy</li>
<li><code>matchUE 3</code> - the undulator 3rd harmonic match with the energy, the h k l values will be different than the previous one</li>
<li><code>ubr H K L</code> - the previous h k l values carried by H K L, we need to do ubr H K L</li>
<li><code>wh</code> - where is every position</li>
<li><code>getE</code> - it gies current energy information</li>
</ul>
<p>We have two detectors: Pilatus 6 (PIL6) and Pilatus 8 (PIL8). PIL6 is in the beam direction. PIL8 is our sigma-pi channel. The alignment will be based on PIL6. </p>
<h2 id="roi-information">ROI information<a class="headerlink" href="#roi-information" title="Permanent link">¶</a></h2>
<p>To set the ROI's for PIL6</p>
<ul>
<li><code>getroi6</code> -  provide information about the roi chosen in the area detector based on the direction beam position, i.e., xmin, ymin, xsize, ysize.</li>
<li><code>setroi6 278 67 1 3</code> - Changing the vertical and horizontal sizes. Examples: 278 and 67 are minimum pixel dimension along x (vertical) and y (horizontal) axis whereas 1 is vertical pixel size (it is minimum) and 3 is horizontal pixel size.</li>
</ul>
<p>To set the ROI's for PIL8</p>
<ul>
<li><code>getroi</code> -  provide information about the roi chosen in the area detector based on the direction beam position, i.e., xmin, ymin, xsize, ysize.</li>
<li><code>setroi 278 67 1 3</code> - Changing the vertical and horizontal sizes. Examples: 278 and 67 are minimum pixel dimension along x (vertical) and y (horizontal) axis whereas 1 is vertical pixel size (it is minimum) and 3 is horizontal pixel size.</li>
</ul>
<p>After setiing up the two peaks, you can set up the macros to optimize the peak positions</p>
<div class="codehilite"><pre><span></span><code>  def alignfine '
        opens
        lup chi -0.2 0.2 50 0.1
        umv chi CEN
        lup th -0.05 0.05 50 0.1
        umv th CEN
        lup tth -0.1 0.1 50 0.1
        umv tth CEN
        lup th -0.03 0.03 30 0.1
        umv th CEN
        lup tth -0.1 0.1 50 0.1
        umv tth CEN
        lup chi -0.2 0.2 50 0.1
        umv chi CEN
        closes
        wh
 ‘
</code></pre></div>

<p>To permform the L scan for (0 1 17) peaks </p>
<div class="codehilite"><pre><span></span><code>  def getlscan '
        wh
        opens
        lscan 16.96 17.04 120 1
        closes
        moveE 11.20
        matchUE 3
        ubr H K L
        opens
        lscan 16.96 17.04 120 1
        closes
        moveE 11.215
        matchUE 3
  ‘
</code></pre></div>

<p>Perform two theta plan</p>
<div class="codehilite"><pre><span></span><code>  def gettthscan2 ‘
        wh
        alignfine
        opens
        lup cryz -0.2 0.2 40 0.1
        umv cryz CEN
        alignfine
        opens
        th2th -0.04 0.04 80 1
        closes
  ‘
</code></pre></div></div></html>

              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../sample_alignment_HDRM/" class="btn btn-neutral float-left" title="HDRM"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../temp/" class="btn btn-neutral float-right" title="Temperature switch">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>© Copyright 2024, CHESS ID4B Beamline</p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/suchismitasarker/CHESS-ID4B-QM2/blob/main/README.md" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../sample_alignment_HDRM/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../temp/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
