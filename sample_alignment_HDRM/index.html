<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://example.com/sample_alignment_HDRM/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>HDRM - CHESS ID4B QM2</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "HDRM";
        var mkdocs_page_input_path = "sample_alignment_HDRM.md";
        var mkdocs_page_url = "/sample_alignment_HDRM/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-ABC123"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', "G-ABC123");
      </script>
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> CHESS ID4B QM2
        </a>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Home</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="..">Welcome</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Beamline information</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../introduction/">Introduction</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../publications/">Beamline Publications</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../beamline_parameters/">Beamline USER Guide</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="#">Sample information</a>
    <ul class="current">
                <li class="toctree-l3"><a class="reference internal" href="../sample_env/">Sample environment</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../sample/">Sample mount</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../SPEC_commands/">ID4B-SPEC commands</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../beamline_basics/">Beamline basics</a>
                </li>
                <li class="toctree-l3 current"><a class="reference internal current" href="#">Sample alignment</a>
    <ul class="current">
                <li class="toctree-l4 current"><a class="reference internal current" href="./">HDRM</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../sample_alignment_REXS/">REXS</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../temp/">Temperature switch</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../gas_flow/">Gas flow control</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">Data Analysis</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../ID4B_Codes/">Data processing</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../ID4B_Codes_general_nodes/">General node</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../nxrefine_General_Node/">NxRefine General Node</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../nxrefine/">NxRefine</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../detailed_dataanalysis/">Detailed Data Analyis</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../practice_notebook/">Practice Analysis Notebook</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">Google Colab - Practice Notebook </a>
    <ul>
                <li class="toctree-l3"><a class="" href="https://colab.research.google.com/drive/13pxbP-x5YinKdkWpURBmMKRLp9SQCtqr?authuser=4#scrollTo=shP_EDON253l">Loading data (Colab)</a>
                </li>
                <li class="toctree-l3"><a class="" href="https://colab.research.google.com/drive/1r1q5RReKN0aZyvmIvYZd-USKgWktEUBZ?authuser=4#scrollTo=eed93954-2c1b-446c-a69f-23572e6f2090">Temp Analysis (Colab)</a>
                </li>
                <li class="toctree-l3"><a class="" href="https://colab.research.google.com/drive/1HOgyH6LStXpYk2xE8yPmo8e4mL1lCqPX?authuser=4">Orthogonal cut (colab)</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">Data visualization</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../nexpy/">NeXpy</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../pymca/">pyMCA</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">Beamline equipments</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../PTZ_camera/">Cameras</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../diffractometer/">Diffractometer</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../cryocooler/">Cryocooler</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../detector_information/">Detector</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Things to check during beamtime</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../note/">Note</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Troubleshooting</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../IC1_signal/">IC1 signal issues</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../controlC_question/">Control C Questions</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../beam_dump/">Beam dump</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../lost_fourc/">Missing SPEC</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../camera_image_stuck/">Camera image stuck</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../nexpy_crushed/">NexPy crushed</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../lower_diode_signal/">Lower diode signal</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../cryo_fail/">Cryostream sudden failure</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../comp_issues/">Computer Issues</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Admin Documentation</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../beamline_setup/">Beamline setup</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Cryostat/">Cryostat</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../energy_change/">Energy change</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../SPEC_macros/">SPEC macro</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Frequently Asked Questions (FAQ)</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../information/">Before coming to the beamline</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../FAQ/">Beamline Frequently Asked Questions</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">About</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../about/">About</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../license/">License</a>
                </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">CHESS ID4B QM2</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Home</li>
          <li class="breadcrumb-item">Beamline information</li>
          <li class="breadcrumb-item">Sample information</li>
          <li class="breadcrumb-item">Sample alignment</li>
      <li class="breadcrumb-item active">HDRM</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/suchismitasarker/CHESS-ID4B-QM2/blob/main/README.md/edit/master/docs/sample_alignment_HDRM.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <div><h1 id="welcome-to-chess-qm2-sample-alignment">Welcome to CHESS &lt;QM&gt;<sup>2</sup> Sample Alignment<a class="headerlink" href="#welcome-to-chess-qm2-sample-alignment" title="Permanent link">¶</a></h1>
<p><img alt="Image title" src="https://github.com/suchismitasarker/CHESS-photos/blob/main/beamline.jpeg?raw=true" width="300"></p>
<div class="admonition danger">
<p class="admonition-title">High Dynamic Range Reciprocal Space Mapping (HDRM)</p>
</div>
<h4 id="basic-theory-hdrm">Basic Theory - HDRM<a class="headerlink" href="#basic-theory-hdrm" title="Permanent link">¶</a></h4>
<p>High Dynamic Range Mapping (HDRM) is primarily a method for studying single crystal samples, although it can also be effective for studying thin films. HDRM aims is to rapidly study wide regions of reciprocal space, collecting the intense Bragg peaks required to refine crystal structures along with weak features associated with superstructures, and the slowly modulated scattering associated with phonons and short-range order[<a href="https://www.chess.cornell.edu/srn-article-cartography-7-dimensions-chess">1</a>].</p>
<div class="admonition hint">
<p class="admonition-title">Single Crytal Alignment</p>
<p>Basic steps for single crystal sample alignment - HDRM</p>
</div>
<figure>
<p><img alt="Image title" src="https://github.com/suchismitasarker/CHESS-ID4B-QM2/blob/main/pictures/goniometer1.png?raw=true" width="150"></p>
</figure>
<h6 id="step-1-manually-stage-center-the-sample-to-the-beam"><i>Step 1:  Manually stage:  center the sample to the beam </i><a class="headerlink" href="#step-1-manually-stage-center-the-sample-to-the-beam" title="Permanent link">¶</a></h6>
<div class="codehilite"><pre><span></span><code>        FOURC&gt; umvr samz 0.1 (relative motion of the sample movement up (+) and down (-)) 
        FOURC&gt; umv phi 0
        FOURC&gt; umv phi 180
        Move x and y to make the sample to the cursor
        FOURC&gt; umv phi 90
        FOURC&gt; umv phi 270
        Do it iteratively until the center of the axis match the sample position
</code></pre></div>

<div class="admonition danger">
<p class="admonition-title">Carefully and slowly insert the sample in the top of the sample stage</p>
</div>
<figure>
<p><img alt="Image title" src="https://github.com/suchismitasarker/CHESS-ID4B-QM2/blob/main/pictures/Qm2%20sample%20stage.png?raw=true" width="450"></p>
</figure>
<h6 id="step-1-automated-stage-center-the-sample-to-the-beam"><i>Step 1:  Automated stage: center the sample to the beam </i><a class="headerlink" href="#step-1-automated-stage-center-the-sample-to-the-beam" title="Permanent link">¶</a></h6>
<div class="codehilite"><pre><span></span><code>        FOURC&gt; umvr samz 0.1 (relative motion of the sample movement up (+) and down (-)) 
        FOURC&gt; umv phi 0
        FOURC&gt; umvr samx 0.1 (make sure you can see sample is moving towards cross +)
        FOURC&gt; umv phi 180 (check the sample is coming back to cross + )
        Move x and y to make the sample to the cursor
        FOURC&gt; umv phi 90
        FOURC&gt; umvr samy 0.1 (make sure you can see sample is moving towards cross +)
        FOURC&gt; umv phi 270 (check the sample is coming back to cross + )

        Do it iteratively until the center of the axis match the sample position
</code></pre></div>

<h6 id="step-2-create-file-structure"><i>Step 2 :  Create file structure </i><a class="headerlink" href="#step-2-create-file-structure" title="Permanent link">¶</a></h6>
<div class="codehilite"><pre><span></span><code>  a) Create newfile from the SPEC terminal

        Srep 1: You need to provide acurate Element Name (K, Sc etc), special character does not work (.,:" etc)

              FOURC&gt;newfile &lt;samplename&gt;

        # samplename : chemical name of your sample, make sure you created folder in your directory



  Provide all the correct informations for metadata in the server
  # Look the table in the googgle doc

  | Sample name | chemical formula | Crystal Structure | Space group | Space group #| Unit cell parameters | 
  | :----------:| :---------------:| :----------------:| :---------: | :-----------:| :--------------------:
  |   CeO2      |       CeO2       |       Cubic       |   Fm-3m     |    225         |a=5.41, b=5.41, c=5.41, alpha=90, beta=90, gamma=90
  | :----------:| :---------------:| :----------------:| :---------: | :-----------:| :---------------------:


  * sample_chemical_formula -- Provide chemical formula of the sample (e.g AV3Sb5): CeO2
  * crystal_system_rt -- Provide room temperature sample crystal system : cubic
  * sample_space_group -- Provide the sample space group :Fm-3m
  * sample_space_group_number -- Provide the sample space group number : 225
  * sample_unit_cell -- Unit cell dimensions  (units: angstrom) :  a = 5.41, b = 5.41, c = 5.41, alpha = 90, beta = 90, gamma = 90
  * phase_transition -- Will the sample undergo a phase transition during the experiment? If yes,what are the temperature and space group? (default: ):N.A
</code></pre></div>

<h6 id="step-3-open-hdrmscansmac-script-and-sort-your-path-sortmypathout"><i>Step 3: Open HDRMscans.mac script and sort your path (sortmypathout)<a class="headerlink" href="#step-3-open-hdrmscansmac-script-and-sort-your-path-sortmypathout" title="Permanent link">¶</a></i></h6>
<div class="codehilite"><pre><span></span><code>        i) Go to the folder: /nfs/chess/id4b/&lt;cycle_number&gt;/&lt;proposal_id&gt;  
        ii) Open HDRMscans.mac file in the folder location (this is not from SPEC terminal)
        ii) Change the `_mysample` = &lt;sample_identifier&gt; (#inside the script)
        # _mysample is the sample identifier
        # save the file
</code></pre></div>

<figure>
<p><img alt="Image title" src="https://github.com/suchismitasarker/CHESS-ID4B-QM2/blob/main/pictures/Alignment_file.png?raw=true" width="850"></p>
</figure>
<div class="admonition danger">
<p class="admonition-title">check the signals</p>
</div>
<h6 id="step-3-run-hdrmscansmac-script-from-terminal"><i>Step 3: Run HDRMscans.mac script from terminal </i><a class="headerlink" href="#step-3-run-hdrmscansmac-script-from-terminal" title="Permanent link">¶</a></h6>
<div class="codehilite"><pre><span></span><code>    # Any time you have modified .mac files, run the command from the terminal
    FOURC&gt; qdo ./HDRMscans.mac 
    # Notes: HDRMscans.mac contains all the script
</code></pre></div>

<h6 id="step-4-if-you-want-to-check-the-best-height-for-the-sample-finding-smaller-sample-best-position"><i>Step 4 : If you want to check the best height for the sample (finding smaller sample best position) </i><a class="headerlink" href="#step-4-if-you-want-to-check-the-best-height-for-the-sample-finding-smaller-sample-best-position" title="Permanent link">¶</a></h6>
<div class="codehilite"><pre><span></span><code>    FOURC&gt;heightscan

    a) Data will save at 'tiff' folder (Example : /nfs/chess/id4b/2026-1/sarker-0000-a/tiffs) inside the user folder at id4b
    b) Check the quality of the datasets at nexpy, DONOT Double click the image, the program will crush
    b) Go to the best position of the sample 
        FOURC&gt; umv samz &lt;position of the sample&gt;
</code></pre></div>

<h6 id="step-5-autotune-condition-talk-to-beamline-scientist"><i>Step 5 : Autotune condition (talk to beamline scientist)  </i><a class="headerlink" href="#step-5-autotune-condition-talk-to-beamline-scientist" title="Permanent link">¶</a></h6>
<div class="codehilite"><pre><span></span><code>  If the autotune is off in the mostab
  a) FOURC&gt; opens (# Open the shutter)
  b) Turn the knob slowly and maximize the counts in IC2
  c) FOURC&gt; closes (# close the shutter)
</code></pre></div>

<figure>
<p><img alt="Image title" src="https://github.com/suchismitasarker/CHESS-ID4B-QM2/blob/main/pictures/mostab.png?raw=true" width="150"></p>
</figure>
<h6 id="step-6-run-three-rotation-crystal-scan"><i>Step 6: Run three rotation crystal scan </i><a class="headerlink" href="#step-6-run-three-rotation-crystal-scan" title="Permanent link">¶</a></h6>
<div class="codehilite"><pre><span></span><code>  It will rotate the crystal three times at different chi and theta angle

    FOURC&gt; threextalscan 300 1

    # here parameter 300 is temperature and 1 is sleeping time

    Note: DONOT forget to put the paramters (temerature and sleep time), otherwise, temperature controller will try to go to 0K

    #Notes: In the threextalscan 1st parameter is temperature 300K and the second parameter is waiting time 1 min
        - It will vary chi, theta and phi angle
        - Collect data phi 0-365 with 3650 images (1 degree/frame)
        - You can the change the exposure time (if needed)

    a) Data will save at raw6M in id4b folder (Example : /nfs/chess/id4b/2026-1/sarker-0000-a/raw6M )
</code></pre></div>

<h6 id="step-7-check-data-nexpy"><i>Step 7: Check data nexpy  </i><a class="headerlink" href="#step-7-check-data-nexpy" title="Permanent link">¶</a></h6>
<p>Please look at the <a href="https://suchismitasarker.github.io/CHESS-ID4B-QM2/nexpy/">Data visualization</a> - Nexpy section</p>
<h4 id="quick-video-on-heightscan-visualization-there-is-text-below-as-well">Quick video on <i> 'heightscan' </i> visualization (there is text below as well)<a class="headerlink" href="#quick-video-on-heightscan-visualization-there-is-text-below-as-well" title="Permanent link">¶</a></h4>
<iframe width="600" height="300" src="https://www.youtube.com/embed/lC853bBnRas?si=OLcOmv5HoKCyejph" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

<ul>
<li>
</ul>
<h4 id="step-2-take-a-look-at-the-priliminary-data-after-data-collection"><i> Step 2 </i> : Take a look at the priliminary data after data collection<a class="headerlink" href="#step-2-take-a-look-at-the-priliminary-data-after-data-collection" title="Permanent link">¶</a></h4>
<ul>
<li>Step1 : Go to 'File' tab</li>
<li>Step 2 : Go to 'Import' tab </li>
<li>Step 3: Go to 'Import image stack'</li>
<li>Step 4: Go to desired file location</li>
<li>Step 5: Select the folder (it will not show any images)</li>
<li>
<p>Step 6: Select the images (mostly 50-60 images)</p>
</li>
<li>
<p>Double clicked the stack images</p>
</li>
<li>Go to the signal and click log scale</li>
<li>Go to z tab and press forward (it will go through the images)</li>
</ul>
<h4 id="quick-video-on-data-collection-make-sure-you-read-the-above-instructions-before-watching-the-video">Quick video on data collection (make sure you read the above instructions before watching the video)<a class="headerlink" href="#quick-video-on-data-collection-make-sure-you-read-the-above-instructions-before-watching-the-video" title="Permanent link">¶</a></h4>
<iframe width="600" height="305" src="https://www.youtube.com/embed/qsAZLayF4Ow?si=oIitQSArHTU1FunV" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

<h4 id="quick-video-on-collected-data-visualization">Quick video on <i>  'collected data' </i>  visualization<a class="headerlink" href="#quick-video-on-collected-data-visualization" title="Permanent link">¶</a></h4>
<iframe width="600" height="300" src="https://www.youtube.com/embed/iyH_1zRsjmg?si=pW0kxtrW19vN1Gd3" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

<ul>
<li>
</ul>
<h4 id="step-2-take-a-look-at-the-priliminary-data-after-data-collection_1"><i> Step 2 </i> : Take a look at the priliminary data after data collection<a class="headerlink" href="#step-2-take-a-look-at-the-priliminary-data-after-data-collection_1" title="Permanent link">¶</a></h4>
<ul>
<li>Step1 : Go to 'File' tab</li>
<li>Step 2 : Go to 'Import' tab </li>
<li>Step 3: Go to 'Import image stack'</li>
<li>Step 4: Go to desired file location</li>
<li>Step 5: Select the folder (it will not show any images)</li>
<li>
<p>Step 6: Select the images (mostly 50-60 images)</p>
</li>
<li>
<p>Double clicked the stack images</p>
</li>
<li>Go to the signal and click log scale</li>
<li>Go to z tab and press forward (it will go through the images)</li>
</ul>
<p>=============================================================================</p>
<div class="admonition type">
<p class="admonition-title">Temperature modify and collect data</p>
</div>
<h6 id="change-temperature-from-300k-and-90-k-if-you-are-at-nitrogen-atomosphere">Change temperature from 300K and 90 K- (if you are at Nitrogen atomosphere)<a class="headerlink" href="#change-temperature-from-300k-and-90-k-if-you-are-at-nitrogen-atomosphere" title="Permanent link">¶</a></h6>
<div class="codehilite"><pre><span></span><code>    FOURC&gt; te 100
    # note: temperature here is 100 Kelvin
</code></pre></div>

<p>Make sure the temperature is stable before you run script</p>
<div class="codehilite"><pre><span></span><code>    FOURC&gt; threextalscan 100 1
</code></pre></div>

<div class="admonition danger">
<p class="admonition-title">Practical guide of the temperature switch between nitrogen and helium</p>
<p>Click the link for details
        <a href="https://suchismitasarker.github.io/CHESS-ID4B-QM2/temp/">Nitrogen --&gt; Helium and Helium --&gt; Nitrogen</a></p>
</div>
<h6 id="_1"><a class="headerlink" href="#_1" title="Permanent link">¶</a></h6>
<p>=============================================================================</p>
<div class="admonition hint">
<p class="admonition-title">Thin-film Alignment</p>
<p>Basic steps for single crystal thin-film sample alignment - HDRM. Detector height needs to change because of grazing incidence. Make sure you are able to see the samples (proper light arrangements)</p>
</div>
<p>Step 1:  Center the sample to the beam </p>
<div class="codehilite"><pre><span></span><code>  a) Move chi, phi, and theta positions to their initial setup
        FOURC&gt; umv chi 90   
        FOURC&gt; umv phi 0  
        FOURC&gt; umv th 0

  b) Perform height adjustment
        Check the signal at the diode 
        FOURC&gt; tw samz 0.01
        Move the sample in the Z-directions and cut the beam in half (for example: if the beam size is 300 microns, move 150 microns from the surface when the signal goes down)
</code></pre></div>

<figure>
<p><img alt="Image title" src="https://github.com/suchismitasarker/CHESS-ID4B-QM2/blob/main/pictures/signals1.png?raw=true" width="500"></p>
</figure>
<div class="codehilite"><pre><span></span><code>  c) Place cursor at center of the sample

              FOURC&gt; umv phi 0
              FOURC&gt; umv phi 180
              FOURC&gt; umv phi 90
              FOURC&gt; umv phi 270
</code></pre></div>

<p>Step 2 :  Creating the file structure</p>
<div class="codehilite"><pre><span></span><code>  a) Create newfile

        FOURC&gt;newfile samplename


  b) Open HDRMscans.mac script for thin-film
        Change the sample ID
</code></pre></div>

<p>Step 3: Run HDRMscans.mac script from terminal</p>
<div class="codehilite"><pre><span></span><code>      FOURC&gt; qdo ./HDRMscans.mac 
      #Notes:HDRMscans.mac contains all the script
</code></pre></div>

<p>Step 3: Check the best height for the sample it will generate tiff file</p>
<div class="codehilite"><pre><span></span><code>    FOURC&gt;powderscan 300 1

    a) Check the quality of the data sets at nexpy
    b) Go to the best position of the sample
</code></pre></div>

<p>Step 4: Autotune condition (talk to beamline scientist)</p>
<div class="codehilite"><pre><span></span><code>  If the autotune is off in the mostab
  a) FOURC&gt; opens (# Open the shutter)
  b) Turn the knob slowly and maximize the counts in IC2
  c) FOURC&gt; closes (# close the shutter)
</code></pre></div>

<figure>
<p><img alt="Image title" src="https://github.com/suchismitasarker/CHESS-ID4B-QM2/blob/main/pictures/mostab.png?raw=true" width="150"></p>
</figure>
<p>Step 5: Run three rotation crystal scan </p>
<div class="codehilite"><pre><span></span><code>    FOURC&gt; threxstalscan 300 1 
    #Notes: Parameters: Temperature = 300, Sleep = 1
</code></pre></div>

<p>Step 5: Check data nexpy 
(<i>please look at the Data visulization - Nexpy section </i>)</p>
<h2 id="examples-of-temperature-dependent-scans">Examples of Temperature Dependent Scans<a class="headerlink" href="#examples-of-temperature-dependent-scans" title="Permanent link">¶</a></h2>
<h4 id="300k-475k-at-25k-temperature-interval">300K- 475K at 25K temperature interval<a class="headerlink" href="#300k-475k-at-25k-temperature-interval" title="Permanent link">¶</a></h4>
<p>Step 1: Follow the instruction of temprature switch 300K-500K and the temperature to stabilize</p>
<div class="codehilite"><pre><span></span><code>  def TScans_high_N2 '
  te = 325
  for (loopT=325; loopT&lt;476; loopT=loopT+25){
  eval(sprintf("threextalscan %s 180",loopT))
  }

  '
</code></pre></div>

<h4 id="90k-300k-at-25k-temperature-interval">90K- 300K at 25K temperature interval<a class="headerlink" href="#90k-300k-at-25k-temperature-interval" title="Permanent link">¶</a></h4>
<div class="codehilite"><pre><span></span><code>  def Tscans_low_to_high_N2 '
  for (loopT=90; loopT &lt; 301; loopT=loopT+15){
  eval(sprintf("threextalscan %s 180", loopT))
  }
  '
</code></pre></div>

<h4 id="90k-100k-at-2k-temperature-interval-100k-126k-at-5k-interval-and-125k-200k-at-25k-interval">90K- 100K at 2K temperature interval, 100K-126K at 5K interval and 125K-200K at 25K interval<a class="headerlink" href="#90k-100k-at-2k-temperature-interval-100k-126k-at-5k-interval-and-125k-200k-at-25k-interval" title="Permanent link">¶</a></h4>
<div class="codehilite"><pre><span></span><code>  def HighTScans_different_range '
  for (loopT=90; loopT &lt; 101; loopT=loopT+2){
  eval(sprintf("threextalscan_longexposure %s 180", loopT))
  }

  for (loopT=100; loopT &lt; 126; loopT=loopT+5){
  eval(sprintf("threextalscan_longexposure %s 180", loopT))
  }

  for (loopT=125; loopT &lt; 200; loopT=loopT+25){
  eval(sprintf("threextalscan_longexposure %s 180", loopT))
  }

  '
</code></pre></div>

<h4 id="15k-90k-at-15k-temperature-interval">15K- 90K at 15K temperature interval<a class="headerlink" href="#15k-90k-at-15k-temperature-interval" title="Permanent link">¶</a></h4>
<div class="codehilite"><pre><span></span><code>  def scans_low_to_high_He '
  for (loopT=15; loopT &lt; 91; loopT=loopT+15){
  eval(sprintf("threextalscan %s 180", loopT))
  }
  '
</code></pre></div></div></html>

              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../beamline_basics/" class="btn btn-neutral float-left" title="Beamline basics"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../sample_alignment_REXS/" class="btn btn-neutral float-right" title="REXS">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>© Copyright 2026, CHESS ID4B Beamline</p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/suchismitasarker/CHESS-ID4B-QM2/blob/main/README.md" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../beamline_basics/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../sample_alignment_REXS/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
