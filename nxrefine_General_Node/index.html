<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://example.com/nxrefine_General_Node/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>NxRefine General Node - CHESS ID4B QM2</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "NxRefine General Node";
        var mkdocs_page_input_path = "nxrefine_General_Node.md";
        var mkdocs_page_url = "/nxrefine_General_Node/";
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/rust.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-ABC123"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-ABC123');
      </script>
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> CHESS ID4B QM2
        </a>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Home</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="..">Welcome</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">User Guide</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../introduction/">Introduction</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../beamline_parameters/">Beamline information</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../SPEC_commands/">ID4B-SPEC commands</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">Sample information</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../sample_env/">Sample environment</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../sample/">Sample mount</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="#">Sample alignment</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../sample_alignment_HDRM/">HDRM</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../sample_alignment_REXS/">REXS</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../temp/">Temperature switch</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../gas_flow/">Gas flow control</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="#">Data Analysis</a>
    <ul class="current">
                <li class="toctree-l3"><a class="reference internal" href="../ID4B_Codes/">Data processing</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../ID4B_Codes_general_nodes/">General node</a>
                </li>
                <li class="toctree-l3 current"><a class="reference internal current" href="./">NxRefine General Node</a>
    <ul class="current">
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../nxrefine/">NxRefine</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="#">Data visualization</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../nexpy/">NeXpy</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../pymca/">pyMCA</a>
                </li>
    </ul>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">Beamline equipments</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../PTZ_camera/">Cameras</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../diffractometer/">Diffractometer</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../cryocooler/">Cryocooler</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../detector_information/">Detector</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../publications/">Publication</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Troubleshooting</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../IC1_signal/">IC1 signal issues</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../beam_dump/">Beam dump</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Admin Documentation</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../beamline_setup/">Beamline setup</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Cryostat/">Cryostat</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../energy_change/">Energy change</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../SPEC_macros/">SPEC macro</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Frequently Asked Questions (FAQ)</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../information/">Before coming to the beamline</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../FAQ/">Beamline Frequently Asked Questions</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">About</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../about/">About</a>
                </li>
                <li class="toctree-l2"><a class="" href="../license.md">License</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="" href="../release-notes.md">Release Notes</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">CHESS ID4B QM2</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>Home &raquo;</li>
          <li>User Guide &raquo;</li>
          <li>Data Analysis &raquo;</li><li>NxRefine General Node</li>
    <li class="wy-breadcrumbs-aside">
        <a href="https://github.com/suchismitasarker/CHESS-ID4B-QM2/blob/main/README.md/edit/master/docs/nxrefine_General_Node.md"
          class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>

          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <div><h1 id="nxrefine">NXRefine<a class="headerlink" href="#nxrefine" title="Permanent link">¶</a></h1>
<p>The code is written by Dr. Ray Osborn. More details will be available <a href="https://nexpy.github.io/nxrefine/">NXRefine</a>.The code provides various tools for stacking the raw data, finding Bragg peaks, solving the orientation matrix, and finally providing the HKL. </p>
<h1 id="nxrefine-general-nodes">NXRefine General Nodes<a class="headerlink" href="#nxrefine-general-nodes" title="Permanent link">¶</a></h1>
<figure>
<p><img alt="Image title" src="https://github.com/suchismitasarker/CHESS-ID4B-QM2/blob/main/pictures/Beamline%20computers.png?raw=true"></p>
</figure>
<p>===============================================================================</p>
<ul>
<li>(i) <b> Step 1 :
Make sure you have permission for the desired folders,  before running the job in the queue, ask your beamline scientist to change the permission of the folder (it is always need to be updated). Also, make sure you have the <i> parent file </i> for each folders, otherwise the code will not work. </b></li>
</ul>
<div class="admonition danger">
<p class="admonition-title">Change the &lt; classe_id &gt; to your own CLASSE ID</p>
</div>
<ul>
<li>
<p>(ii) <b> Step 2 :</b> Login to lnx201</p>
<pre class="codehilite"><code>ssh &lt;classe_id&gt;@lnx201.classe.cornell.edu
</code></pre>

</li>
<li>
<p>(iii) <b> Step 3 :</b> Make sure you are at home directory</p>
<pre class="codehilite"><code>cd 
pwd
/home/&lt;classe_id&gt;/
</code></pre>

</li>
<li>
<p>(iv) <b> Step 4 :</b> create nxserver settings</p>
<pre class="codehilite"><code>mkdir -p  /home/&lt;classe_id&gt;/.nxserver/
</code></pre>

</li>
<li>
<p>(v) <b> Step 5 :</b>: Copy the nxserver setting</p>
<pre class="codehilite"><code>cp /home/ss3428/.nxserver/settings.ini /home/&lt;classe_id&gt;/.nxserver/
</code></pre>

</li>
<li>
<p>(vi) <b> Step 6 :</b>: Go to the desired data analayis forder (it will your folder in aux)</p>
<pre class="codehilite"><code>cd /nfs/chess/id4baux/2024-1/&lt;BTR-3946-a&gt;/
</code></pre>

</li>
<li>
<p>(vi) <b> Step 7 :</b>: Changed the desired steps for nxrefine from the folder or if you know how to use vim, then do to change the qsub file and do that necessasy steps </p>
</li>
<li>
<p>If you are nomachine, you can change the qsub_jobs_****.sh file directly based on the steps you want to perform in the data processing  </p>
<pre class="codehilite"><code>vim qsub_jobs_&lt;name of the user&gt;.sh
</code></pre>

</li>
<li>
<p>(vii) <b> Step 8 : </b> Run the job in lnx201 (make sure path is correct)</p>
<pre class="codehilite"><code>qsub -q all.q -l mem_free=350G -pe sge_pe 8 -hold_jid 8 -S /bin/bash /nfs/chess/id4baux/2024-1/postec-3946-a/qsub_jobs_&lt;name of the file&gt;.sh
</code></pre>

</li>
</ul>
<div class="admonition danger">
<p class="admonition-title">If it did not work, try to use less memory and submit the job again</p>
</div>
<ul>
<li>
<p>You can change mem_free = 200, below is the example</p>
<pre class="codehilite"><code>qsub -q all.q -l mem_free=200G -pe sge_pe 8 -hold_jid 8 -S /bin/bash /nfs/chess/id4baux/2024-1/postec-3946-a/qsub_jobs_&lt;name of the file&gt;.sh
</code></pre>

</li>
<li>
<p>(viii) <b> Step 9 :</b> Check the status</p>
<pre class="codehilite"><code>qstat
</code></pre>

</li>
<li>
<p>(ix) <b> Step 10 :</b> See the status ebaborately</p>
<pre class="codehilite"><code>cat qsub_jobs_&lt;classe_id&gt;.sh.e7231424
</code></pre>

</li>
<li>
<p>(x) <b> Step 11 :</b> Finally after you the data procesing</p>
<pre class="codehilite"><code>cd /nfs/chess/id4baux/2024-1/
chmod -R 777 &lt;project_name&gt;
</code></pre>

</li>
</ul></div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../ID4B_Codes_general_nodes/" class="btn btn-neutral float-left" title="General node"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../nxrefine/" class="btn btn-neutral float-right" title="NxRefine">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>© Copyright 2023, CHESS ID4B Beamline</p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/suchismitasarker/CHESS-ID4B-QM2/blob/main/README.md" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../ID4B_Codes_general_nodes/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../nxrefine/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
