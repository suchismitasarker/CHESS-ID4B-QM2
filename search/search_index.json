{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to CHESS ID4B - <QM> 2 Beamline Documentation! \u00b6 The <QM> 2 beamline is optimized to uncover intertwined quantum correlations of spins, charges and orbitals, over a wide temperature range and spanning entire phase diagrams. For full documentation of beamline capabilities, please visit <QM> 2 beamline . This document is a collection of codes and equipment details useful for the beamline ID4B at CHESS. If you encounter with any bug or like to have additional functionality, please send an email to ID4B beamline . User Documentations \u00b6 Getting Started ID4B-SPEC commands Data processing Sample alignment \u00b6 Sample Alignments High Dynamic Range Reciprocal Space Mapping (HDRM) Resonant Elastic X-ray Scattering (REXS) Beamline details \u00b6 Diffractometer Cryocooler Detector information Frequently Asked Questions (FAQ) \u00b6 Questions","title":"Welcome"},{"location":"#welcome-to-chess-id4b-qm2-beamline-documentation","text":"The <QM> 2 beamline is optimized to uncover intertwined quantum correlations of spins, charges and orbitals, over a wide temperature range and spanning entire phase diagrams. For full documentation of beamline capabilities, please visit <QM> 2 beamline . This document is a collection of codes and equipment details useful for the beamline ID4B at CHESS. If you encounter with any bug or like to have additional functionality, please send an email to ID4B beamline .","title":"Welcome to CHESS ID4B - &#60;QM&#62;2 Beamline Documentation!"},{"location":"#user-documentations","text":"Getting Started ID4B-SPEC commands Data processing","title":"User Documentations"},{"location":"#sample-alignment","text":"Sample Alignments High Dynamic Range Reciprocal Space Mapping (HDRM) Resonant Elastic X-ray Scattering (REXS)","title":"Sample alignment"},{"location":"#beamline-details","text":"Diffractometer Cryocooler Detector information","title":"Beamline details"},{"location":"#frequently-asked-questions-faq","text":"Questions","title":"Frequently Asked Questions (FAQ)"},{"location":"FAQ/","text":"Frequesnly ask questions (FAQ) \u00b6 Frequesnly ask questions (FAQ) Answers are given by Dr. Jacob Ruff and Suchismita Sarker Q. How is the measurement time and what is the angle step size when rotating the single crystal? \u00b6 These parameters are adjustable, of course, but the most \u201ctypical\u201d choice is continuous rotation, 0.1 degree angular integrations, collecting 2 or 3 redundant 360 degree rotations with different rotation axes, and ~0.1 seconds per frame. So, full data collection is ~3600 frames x 3 scans x 0.1 seconds = 18 minutes of data collection at a single temperature. There is motor movement overhead that adds time to to this, but basically collecting one comprehensive dataset at one temperature in <30 minutes is reasonable . Q. What is the photon energy and Qmax for 3D-PDF experiment? \u00b6 Presently QM2 has a maximum operating energy of 52 keV. The minimum sample-to-detector distance with the Pilatus6M is ~380mm. This would give you a two-theta max < 45 degrees, and a QMax <~ 20 inv A, depending on how you center the detector on the beam . Q. What is the temperature range available for 3D-dPDF? We are requesting cryostream-like temperature region (100~500 K), but it would be intesting to know if any lower or higher tempearture setup accessible. \u00b6 Our gas cryocooler system gives the best quality data, since there are no windows. Our system operates using either helium or nitrogen, and can switch on the fly. With helium, it operates from ~13K to 180K, and with nitrogen from ~95K to 480K. When using this system, we recommend users mount samples using crystallography loops, as noted above . Q. 2. What is the suitable single crystal size in volume and dimension lengths so that it can be covered by the beam when rotating (not too large or too small)? \u00b6 The beam at 4B is ~200 microns tall and ~1mm wide. Typically, we mount crystals using mitigen crystallography loops if using a gas cryocooler, or on copper posts if using a closed cycle cryostat. The ideal crystal size/shape depends a little on the mounting method. Generally, though, you want to keep the scattering volume constant while rotating, and you want to have crystals <~ one attenuation length in at least 2 dimensions. Samples can in principle be longer along the rotation axis direction - like a cylinder or bar where the short directions are ~ 100 microns but the long direction is several mm, still works well . Q: Where is my data? \u00b6 The data stored at id4b, after processing the data your can find that in id4baux. Q: How to transfer the data? \u00b6 You should use globus to transfer your data. Q. How to recover if the computer fail? \u00b6 Q. \u00b6","title":"Frequently Asked Questions (FAQ)"},{"location":"FAQ/#frequesnly-ask-questions-faq","text":"Frequesnly ask questions (FAQ) Answers are given by Dr. Jacob Ruff and Suchismita Sarker","title":"Frequesnly ask questions (FAQ)"},{"location":"FAQ/#q-how-is-the-measurement-time-and-what-is-the-angle-step-size-when-rotating-the-single-crystal","text":"These parameters are adjustable, of course, but the most \u201ctypical\u201d choice is continuous rotation, 0.1 degree angular integrations, collecting 2 or 3 redundant 360 degree rotations with different rotation axes, and ~0.1 seconds per frame. So, full data collection is ~3600 frames x 3 scans x 0.1 seconds = 18 minutes of data collection at a single temperature. There is motor movement overhead that adds time to to this, but basically collecting one comprehensive dataset at one temperature in <30 minutes is reasonable .","title":"Q. How is the measurement time and what is the angle step size when rotating the single crystal?"},{"location":"FAQ/#q-what-is-the-photon-energy-and-qmax-for-3d-pdf-experiment","text":"Presently QM2 has a maximum operating energy of 52 keV. The minimum sample-to-detector distance with the Pilatus6M is ~380mm. This would give you a two-theta max < 45 degrees, and a QMax <~ 20 inv A, depending on how you center the detector on the beam .","title":"Q. What is the photon energy and Qmax for 3D-PDF experiment?"},{"location":"FAQ/#q-what-is-the-temperature-range-available-for-3d-dpdf-we-are-requesting-cryostream-like-temperature-region-100500-k-but-it-would-be-intesting-to-know-if-any-lower-or-higher-tempearture-setup-accessible","text":"Our gas cryocooler system gives the best quality data, since there are no windows. Our system operates using either helium or nitrogen, and can switch on the fly. With helium, it operates from ~13K to 180K, and with nitrogen from ~95K to 480K. When using this system, we recommend users mount samples using crystallography loops, as noted above .","title":"Q. What is the temperature range available for 3D-dPDF? We are requesting cryostream-like temperature region (100~500 K), but it would be intesting to know if any lower or higher tempearture setup accessible."},{"location":"FAQ/#q-2-what-is-the-suitable-single-crystal-size-in-volume-and-dimension-lengths-so-that-it-can-be-covered-by-the-beam-when-rotating-not-too-large-or-too-small","text":"The beam at 4B is ~200 microns tall and ~1mm wide. Typically, we mount crystals using mitigen crystallography loops if using a gas cryocooler, or on copper posts if using a closed cycle cryostat. The ideal crystal size/shape depends a little on the mounting method. Generally, though, you want to keep the scattering volume constant while rotating, and you want to have crystals <~ one attenuation length in at least 2 dimensions. Samples can in principle be longer along the rotation axis direction - like a cylinder or bar where the short directions are ~ 100 microns but the long direction is several mm, still works well .","title":"Q. 2. What is the suitable single crystal size in volume and dimension lengths so that it can be covered by the beam when rotating (not too large or too small)?"},{"location":"FAQ/#q-where-is-my-data","text":"The data stored at id4b, after processing the data your can find that in id4baux.","title":"Q: Where is my data?"},{"location":"FAQ/#q-how-to-transfer-the-data","text":"You should use globus to transfer your data.","title":"Q: How to transfer the data?"},{"location":"FAQ/#q-how-to-recover-if-the-computer-fail","text":"","title":"Q. How to recover if the computer fail?"},{"location":"FAQ/#q","text":"","title":"Q."},{"location":"IC1_signal/","text":"IC1 varies signal continuously 20/200 - maximum counts \u00b6 Inform beamline scientist \u00b6 Step 1: check the current (CESR) : Is it okay? If yes, then follow the step 2 Step 2: Check the manual shutter : is it open? If yes, then follow the step 3 Step 3: Go to stkechy_mostab terminal and peak a number Step 4: peak a number 3 Turn feeback off Step 5: wait until it maximize signal at IC1 Step 6: peak a number 1 Autotune Step 7: wait untill it maximize IC1","title":"IC1 signal issues"},{"location":"IC1_signal/#ic1-varies-signal-continuously-20200-maximum-counts","text":"","title":"IC1 varies signal continuously 20/200 - maximum counts"},{"location":"IC1_signal/#inform-beamline-scientist","text":"Step 1: check the current (CESR) : Is it okay? If yes, then follow the step 2 Step 2: Check the manual shutter : is it open? If yes, then follow the step 3 Step 3: Go to stkechy_mostab terminal and peak a number Step 4: peak a number 3 Turn feeback off Step 5: wait until it maximize signal at IC1 Step 6: peak a number 1 Autotune Step 7: wait untill it maximize IC1","title":"Inform beamline scientist"},{"location":"ID4B_Codes/","text":"Welcome to Data Processing \u00b6 NOTE Single crystal data-processing codes are written by Dr. Jacob Ruff based on reference [1] H. You, J. Appl. Cryst.(1999).32, 614-623 and [2] W. R. & Levy, H. A. (1967). Acta Cryst. 22, 457\u2013464 The purpose of this guide is to illustrate some of the main features that Jacob's code provides. It assumes a very basic working knowledge with python pakages. To download the package please go to the github link. The code provides various tools for stacking the raw data, finding Bragg peaks, solving orientation matrix and finally provide the HKL. The results are visible to NeXpy GUI . Software \u00b6 Single crystal data-processing steps \u00b6 STEP I : Calibrate Detector & Beamline STEP II : Stack data STEP III : Find Bragg peaks STEP IV : Solve orientation matrix STEP V : Convert stacks of data to HKL volume Usage Examples \u00b6 Step I : Calibrate Detector & Beamline After collecting data from CeO2, LaB6, we calibrate the date by using pyFAI-calib2. Referemce shown below Reference: pyFAI reference : pyFAI . pyFAI-calib2 : calibration_video Calibration of a diffraction setup using the Graphical User Interface (GUI) # Create calibration folder to the desired file location where new_averaged_file (i.e. ceria37keV.cbf) will save >>> cd calibration #pyFAI-average -o <new_averaged_filename> <location of the datapath> <all the filenames> #Example: >>> pyFAI-average -o ceria37keV.cbf /nfs/chess/id4b/2022-3/sarker-0000-0/raw6M/ceria/standard/300/ceria_001/ceria_PIL10_001_*.cbf`` # generates average of all the images >>> pyFAI-calib2 # generates .poni and mask.edf files After doing the calibration, save the .poni and mask file =========================================================================== Computers : Data processing \u00b6 Recommendation : lnx306 to run the stacking code, HKL convertion code in lnx1034-f1 In the beamline, you will find the folder codebase_for_users where all codes are saved. lnx306 or lnx1034-f1 can make ~3 stacks at a time before running out of the memory auto_ormfinder and Pil6M_HKLConv both take all the CPUs. STEP II : Stack data The script take all the detector's raw .cbf files and performed calibration. You can the get the stack_em_all_cbf_2022.py . Step 1 : the `python stack_em_all_cbf_2022.py` python script Modify : i) Project name : proj_name = \"sarker-000-a/\" (#project name) ii) Provide the .poni filename calibfile = \"/nfs/chess/id4baux/\"+run_cycle+\"+proj_name+\"/calibration/ceria37keV.poni\" iii)Provide .edf filename maskfile = \"/nfs/chess/id4baux/\"+run_cycle+\"+proj_name+\"/calibration/mask.edf\" Step 2 : Run python code Usage: python stack_em_all_cbf_2022.py chem_formula sample_id spec_scan_num temperature Example: >>>python stack_em_all_cbf_2022.py CoTiO3 sample 11 50 Step 3 : Check data After stacking is done the processed data will be avilable in id4baux folder You can create bash script to run the stacking #! /bin/bash python stack_em_all_cbf_2022.py CoTiO3 sample 11 50 python stack_em_all_cbf_2022.py CoTiO3 sample 12 50 python stack_em_all_cbf_2022.py CoTiO3 sample 13 50 =========================================================================== STEP III: Find Bragg peaks simple_peakfinder.py script Step 1: After stacking is done, take the whole stack from the id4aux data folder and run simple_peakfinder.py code Usage: python simple_peakfinder.py /full/path/to/stack/ 0.95 Example: >>> python simple_peakfinder.py /nfs/chess/id4baux/2022-3/sarker-0000-a/CoTiO3/sample/300/ 0.95 Would consider anything above 95% of max counts as a Bragg peak. You can change the thereshold as needed. Check the number of peaks, you find after running the code. In between 200-3000 is a good number. =========================================================================== STEP IV: Solve orientation matrix auto_ormfinder.py script Usage: python auto_ormfinder.py */full/path/to/stack/ peakfilename.npy Example: >>>python auto_ormfinder.py /nfs/chess/id4baux/2022-3/sarker-0000-a/CoTiO3/sample/300/ peaklist1.npy Please provide a space between pathname (/nfs/chess/id4baux/2022-3/sarker-0000-a/CoTiO3/sample/300/) and peaklist1.npy =========================================================================== STEP V: Convert stacks of data to HKL volume Pil6M_HKLConv_3D_2022.py python script (edit to point to project, ormatrix, and define HKL grid) Step 1: Edit the script i) Change the project name projd = \"/nfs/chess/id4baux/2022-3/sarker-0000-a\" sampldi = \"/CoTiO3/sample/\" ii) Change the sample name: sampldi = \"/CoTiO3/sample/\" iii) Change the ormatix ormat = nxload(stackhklpath+\"ormatrix_v1.nxs\") iv) Define the hkl space to histogram H= np.arrange (-5.1, 5.1, 0.01) K= np.arrange (-5.1, 5.1, 0.01) L= np.arrange (-5.1, 5.1, 0.01) Step 2: Usage: python Pil6M_HKLConv_3D_2022.py temperature Example: python Pil6M_HKLConv_3D_2022.py 50 Runnning same sample at different temperature processing Step A : Do the stacking (follow STEP I above) Step B : Copy the orientation matrix from processed data Step C : Run STEP V =========================================================================== Important links for more details \u00b6 Remote access to Linux machines Access to nomachine Data transfer Globus CHESS computing farm access CHESS jupyterhub CLASSE-IT Service Requests","title":"Data processing"},{"location":"ID4B_Codes/#welcome-to-data-processing","text":"NOTE Single crystal data-processing codes are written by Dr. Jacob Ruff based on reference [1] H. You, J. Appl. Cryst.(1999).32, 614-623 and [2] W. R. & Levy, H. A. (1967). Acta Cryst. 22, 457\u2013464 The purpose of this guide is to illustrate some of the main features that Jacob's code provides. It assumes a very basic working knowledge with python pakages. To download the package please go to the github link. The code provides various tools for stacking the raw data, finding Bragg peaks, solving orientation matrix and finally provide the HKL. The results are visible to NeXpy GUI .","title":"Welcome to Data Processing"},{"location":"ID4B_Codes/#software","text":"","title":"Software"},{"location":"ID4B_Codes/#single-crystal-data-processing-steps","text":"STEP I : Calibrate Detector & Beamline STEP II : Stack data STEP III : Find Bragg peaks STEP IV : Solve orientation matrix STEP V : Convert stacks of data to HKL volume Usage","title":"Single crystal data-processing steps"},{"location":"ID4B_Codes/#examples","text":"Step I : Calibrate Detector & Beamline After collecting data from CeO2, LaB6, we calibrate the date by using pyFAI-calib2. Referemce shown below Reference: pyFAI reference : pyFAI . pyFAI-calib2 : calibration_video Calibration of a diffraction setup using the Graphical User Interface (GUI) # Create calibration folder to the desired file location where new_averaged_file (i.e. ceria37keV.cbf) will save >>> cd calibration #pyFAI-average -o <new_averaged_filename> <location of the datapath> <all the filenames> #Example: >>> pyFAI-average -o ceria37keV.cbf /nfs/chess/id4b/2022-3/sarker-0000-0/raw6M/ceria/standard/300/ceria_001/ceria_PIL10_001_*.cbf`` # generates average of all the images >>> pyFAI-calib2 # generates .poni and mask.edf files After doing the calibration, save the .poni and mask file ===========================================================================","title":"Examples"},{"location":"ID4B_Codes/#computers-data-processing","text":"Recommendation : lnx306 to run the stacking code, HKL convertion code in lnx1034-f1 In the beamline, you will find the folder codebase_for_users where all codes are saved. lnx306 or lnx1034-f1 can make ~3 stacks at a time before running out of the memory auto_ormfinder and Pil6M_HKLConv both take all the CPUs. STEP II : Stack data The script take all the detector's raw .cbf files and performed calibration. You can the get the stack_em_all_cbf_2022.py . Step 1 : the `python stack_em_all_cbf_2022.py` python script Modify : i) Project name : proj_name = \"sarker-000-a/\" (#project name) ii) Provide the .poni filename calibfile = \"/nfs/chess/id4baux/\"+run_cycle+\"+proj_name+\"/calibration/ceria37keV.poni\" iii)Provide .edf filename maskfile = \"/nfs/chess/id4baux/\"+run_cycle+\"+proj_name+\"/calibration/mask.edf\" Step 2 : Run python code Usage: python stack_em_all_cbf_2022.py chem_formula sample_id spec_scan_num temperature Example: >>>python stack_em_all_cbf_2022.py CoTiO3 sample 11 50 Step 3 : Check data After stacking is done the processed data will be avilable in id4baux folder You can create bash script to run the stacking #! /bin/bash python stack_em_all_cbf_2022.py CoTiO3 sample 11 50 python stack_em_all_cbf_2022.py CoTiO3 sample 12 50 python stack_em_all_cbf_2022.py CoTiO3 sample 13 50 =========================================================================== STEP III: Find Bragg peaks simple_peakfinder.py script Step 1: After stacking is done, take the whole stack from the id4aux data folder and run simple_peakfinder.py code Usage: python simple_peakfinder.py /full/path/to/stack/ 0.95 Example: >>> python simple_peakfinder.py /nfs/chess/id4baux/2022-3/sarker-0000-a/CoTiO3/sample/300/ 0.95 Would consider anything above 95% of max counts as a Bragg peak. You can change the thereshold as needed. Check the number of peaks, you find after running the code. In between 200-3000 is a good number. =========================================================================== STEP IV: Solve orientation matrix auto_ormfinder.py script Usage: python auto_ormfinder.py */full/path/to/stack/ peakfilename.npy Example: >>>python auto_ormfinder.py /nfs/chess/id4baux/2022-3/sarker-0000-a/CoTiO3/sample/300/ peaklist1.npy Please provide a space between pathname (/nfs/chess/id4baux/2022-3/sarker-0000-a/CoTiO3/sample/300/) and peaklist1.npy =========================================================================== STEP V: Convert stacks of data to HKL volume Pil6M_HKLConv_3D_2022.py python script (edit to point to project, ormatrix, and define HKL grid) Step 1: Edit the script i) Change the project name projd = \"/nfs/chess/id4baux/2022-3/sarker-0000-a\" sampldi = \"/CoTiO3/sample/\" ii) Change the sample name: sampldi = \"/CoTiO3/sample/\" iii) Change the ormatix ormat = nxload(stackhklpath+\"ormatrix_v1.nxs\") iv) Define the hkl space to histogram H= np.arrange (-5.1, 5.1, 0.01) K= np.arrange (-5.1, 5.1, 0.01) L= np.arrange (-5.1, 5.1, 0.01) Step 2: Usage: python Pil6M_HKLConv_3D_2022.py temperature Example: python Pil6M_HKLConv_3D_2022.py 50 Runnning same sample at different temperature processing Step A : Do the stacking (follow STEP I above) Step B : Copy the orientation matrix from processed data Step C : Run STEP V ===========================================================================","title":"Computers : Data processing"},{"location":"ID4B_Codes/#important-links-for-more-details","text":"Remote access to Linux machines Access to nomachine Data transfer Globus CHESS computing farm access CHESS jupyterhub CLASSE-IT Service Requests","title":"Important links for more details "},{"location":"ID4B_Codes_general_nodes/","text":"Computers : Data processing General nodes \u00b6 =============================================================================== Want to process the data after leaving beamline? If you need more information CHESS computing farm access Using general nodes follow the below steps Step 1 : login to ssh <username>@lnx201.classe.cornell.edu Step 2: qrsh -q interactive.q -l mem_free=350G Or if you need more core Step 2: qrsh -q interactive.q -l mem_free=350G -pe sge_pe 20 Step 3: source /nfs/chess/sw/anaconda3_jpcr/bin/activate Step 4: qstat Step 5 : ls Step 6: cd /nfs/chess/id4baux/2023-2/codebase_for_users/ Step 7: Follow Step II above If you are doing stacking from general node, you need to change the permission setup Giving permission from your own account to chess_id4b to do rest of the processing follow the below steps \u00b6 Step 1: If you are using general cluster, then follow the steps from your account a) Go to the desired path b) chmod -R 777 (foldername) STEP II : Stack data The script take all the detector's raw .cbf files and performed calibration. You can the get the stack_em_all_cbf_2022.py . Step 1 : the `python stack_em_all_cbf_2022.py` python script Modify : i) Project name : proj_name = \"sarker-000-a/\" (#project name) ii) Provide the .poni filename calibfile = \"/nfs/chess/id4baux/\"+run_cycle+\"+proj_name+\"/calibration/ceria37keV.poni\" iii)Provide .edf filename maskfile = \"/nfs/chess/id4baux/\"+run_cycle+\"+proj_name+\"/calibration/mask.edf\" Step 2 : Run python code Usage: python stack_em_all_cbf_2022.py chem_formula sample_id spec_scan_num temperature Example: >>>python stack_em_all_cbf_2022.py CoTiO3 sample 11 50 Step 3 : Check data After stacking is done the processed data will be avilable in id4baux folder You can create bash script to run the stacking #! /bin/bash python stack_em_all_cbf_2022.py CoTiO3 sample 11 50 python stack_em_all_cbf_2022.py CoTiO3 sample 12 50 python stack_em_all_cbf_2022.py CoTiO3 sample 13 50 =========================================================================== STEP III: Find Bragg peaks simple_peakfinder.py script Step 1: After stacking is done, take the whole stack from the id4aux data folder and run simple_peakfinder.py code Usage: python simple_peakfinder.py /full/path/to/stack/ 0.95 Example: >>> python simple_peakfinder.py /nfs/chess/id4baux/2022-3/sarker-0000-a/CoTiO3/sample/300/ 0.95 Would consider anything above 95% of max counts as a Bragg peak. You can change the thereshold as needed. Check the number of peaks, you find after running the code. In between 200-3000 is a good number. =========================================================================== STEP IV: Solve orientation matrix auto_ormfinder.py script Usage: python auto_ormfinder.py */full/path/to/stack/ peakfilename.npy Example: >>>python auto_ormfinder.py /nfs/chess/id4baux/2022-3/sarker-0000-a/CoTiO3/sample/300/ peaklist1.npy Please provide a space between pathname (/nfs/chess/id4baux/2022-3/sarker-0000-a/CoTiO3/sample/300/) and peaklist1.npy =========================================================================== STEP V: Convert stacks of data to HKL volume Pil6M_HKLConv_3D_2022.py python script (edit to point to project, ormatrix, and define HKL grid) Step 1: Edit the script i) Change the project name projd = \"/nfs/chess/id4baux/2022-3/sarker-0000-a\" sampldi = \"/CoTiO3/sample/\" ii) Change the sample name: sampldi = \"/CoTiO3/sample/\" iii) Change the ormatix ormat = nxload(stackhklpath+\"ormatrix_v1.nxs\") iv) Define the hkl space to histogram H= np.arrange (-5.1, 5.1, 0.01) K= np.arrange (-5.1, 5.1, 0.01) L= np.arrange (-5.1, 5.1, 0.01) Step 2: Usage: python Pil6M_HKLConv_3D_2022.py temperature Example: python Pil6M_HKLConv_3D_2022.py 50 Runnning same sample at different temperature processing Step A : Do the stacking (follow STEP I above) Step B : Copy the orientation matrix from processed data Step C : Run STEP V =========================================================================== login to jupyter To tunnel the jupyter notebook from a node to the browser on the station computer, try this: 1) setup your environment and start jupyter on the node (ie lnx306 or whatever) with jupyter notebook --no-browser --port=8888 --ip=\"172.16.3.6\" 2) from the station computer, open a new terminal and do ssh -N -f -L localhost:8888:lnx306.classe.cornell.edu:8888 3) on the station computer, browse to localhost:8888 and enter the token as before (edited) Important links for more details \u00b6 Remote access to Linux machines Access to nomachine Data transfer Globus CHESS computing farm access CHESS jupyterhub CLASSE-IT Service Requests","title":"General node"},{"location":"ID4B_Codes_general_nodes/#computers-data-processing-general-nodes","text":"=============================================================================== Want to process the data after leaving beamline? If you need more information CHESS computing farm access Using general nodes follow the below steps Step 1 : login to ssh <username>@lnx201.classe.cornell.edu Step 2: qrsh -q interactive.q -l mem_free=350G Or if you need more core Step 2: qrsh -q interactive.q -l mem_free=350G -pe sge_pe 20 Step 3: source /nfs/chess/sw/anaconda3_jpcr/bin/activate Step 4: qstat Step 5 : ls Step 6: cd /nfs/chess/id4baux/2023-2/codebase_for_users/ Step 7: Follow Step II above If you are doing stacking from general node, you need to change the permission setup","title":"Computers : Data processing General nodes"},{"location":"ID4B_Codes_general_nodes/#giving-permission-from-your-own-account-to-chess_id4b-to-do-rest-of-the-processing-follow-the-below-steps","text":"Step 1: If you are using general cluster, then follow the steps from your account a) Go to the desired path b) chmod -R 777 (foldername) STEP II : Stack data The script take all the detector's raw .cbf files and performed calibration. You can the get the stack_em_all_cbf_2022.py . Step 1 : the `python stack_em_all_cbf_2022.py` python script Modify : i) Project name : proj_name = \"sarker-000-a/\" (#project name) ii) Provide the .poni filename calibfile = \"/nfs/chess/id4baux/\"+run_cycle+\"+proj_name+\"/calibration/ceria37keV.poni\" iii)Provide .edf filename maskfile = \"/nfs/chess/id4baux/\"+run_cycle+\"+proj_name+\"/calibration/mask.edf\" Step 2 : Run python code Usage: python stack_em_all_cbf_2022.py chem_formula sample_id spec_scan_num temperature Example: >>>python stack_em_all_cbf_2022.py CoTiO3 sample 11 50 Step 3 : Check data After stacking is done the processed data will be avilable in id4baux folder You can create bash script to run the stacking #! /bin/bash python stack_em_all_cbf_2022.py CoTiO3 sample 11 50 python stack_em_all_cbf_2022.py CoTiO3 sample 12 50 python stack_em_all_cbf_2022.py CoTiO3 sample 13 50 =========================================================================== STEP III: Find Bragg peaks simple_peakfinder.py script Step 1: After stacking is done, take the whole stack from the id4aux data folder and run simple_peakfinder.py code Usage: python simple_peakfinder.py /full/path/to/stack/ 0.95 Example: >>> python simple_peakfinder.py /nfs/chess/id4baux/2022-3/sarker-0000-a/CoTiO3/sample/300/ 0.95 Would consider anything above 95% of max counts as a Bragg peak. You can change the thereshold as needed. Check the number of peaks, you find after running the code. In between 200-3000 is a good number. =========================================================================== STEP IV: Solve orientation matrix auto_ormfinder.py script Usage: python auto_ormfinder.py */full/path/to/stack/ peakfilename.npy Example: >>>python auto_ormfinder.py /nfs/chess/id4baux/2022-3/sarker-0000-a/CoTiO3/sample/300/ peaklist1.npy Please provide a space between pathname (/nfs/chess/id4baux/2022-3/sarker-0000-a/CoTiO3/sample/300/) and peaklist1.npy =========================================================================== STEP V: Convert stacks of data to HKL volume Pil6M_HKLConv_3D_2022.py python script (edit to point to project, ormatrix, and define HKL grid) Step 1: Edit the script i) Change the project name projd = \"/nfs/chess/id4baux/2022-3/sarker-0000-a\" sampldi = \"/CoTiO3/sample/\" ii) Change the sample name: sampldi = \"/CoTiO3/sample/\" iii) Change the ormatix ormat = nxload(stackhklpath+\"ormatrix_v1.nxs\") iv) Define the hkl space to histogram H= np.arrange (-5.1, 5.1, 0.01) K= np.arrange (-5.1, 5.1, 0.01) L= np.arrange (-5.1, 5.1, 0.01) Step 2: Usage: python Pil6M_HKLConv_3D_2022.py temperature Example: python Pil6M_HKLConv_3D_2022.py 50 Runnning same sample at different temperature processing Step A : Do the stacking (follow STEP I above) Step B : Copy the orientation matrix from processed data Step C : Run STEP V =========================================================================== login to jupyter To tunnel the jupyter notebook from a node to the browser on the station computer, try this: 1) setup your environment and start jupyter on the node (ie lnx306 or whatever) with jupyter notebook --no-browser --port=8888 --ip=\"172.16.3.6\" 2) from the station computer, open a new terminal and do ssh -N -f -L localhost:8888:lnx306.classe.cornell.edu:8888 3) on the station computer, browse to localhost:8888 and enter the token as before (edited)","title":"Giving permission from your own account to chess_id4b to do rest of the processing follow the below steps "},{"location":"ID4B_Codes_general_nodes/#important-links-for-more-details","text":"Remote access to Linux machines Access to nomachine Data transfer Globus CHESS computing farm access CHESS jupyterhub CLASSE-IT Service Requests","title":"Important links for more details "},{"location":"PTZ_camera/","text":"Cameras \u00b6 Two Pan-tilt-zoom (PZT) cameras are installed in the ID4B beamline for the users to look the sample position and computers. The IP address of the cameras shown below Hutch PTZ camera : 192.168.182.82 Station PTZ camera : 192.168.182.42 Opening the station camera with cursur (if it is crushed ) Oen the terminal >>> ImageJ 3 windows will open Chane in the window Change PIL6--> ID4B:image1: Press strat button camera window will pop-up sample_view_controls To access the top camera \u00b6 Type : \"ImageJ ID4B_T\" in ImageJ \"sample_view_top_controls\"","title":"Cameras"},{"location":"PTZ_camera/#cameras","text":"Two Pan-tilt-zoom (PZT) cameras are installed in the ID4B beamline for the users to look the sample position and computers. The IP address of the cameras shown below Hutch PTZ camera : 192.168.182.82 Station PTZ camera : 192.168.182.42 Opening the station camera with cursur (if it is crushed ) Oen the terminal >>> ImageJ 3 windows will open Chane in the window Change PIL6--> ID4B:image1: Press strat button camera window will pop-up sample_view_controls","title":"Cameras"},{"location":"PTZ_camera/#to-access-the-top-camera","text":"Type : \"ImageJ ID4B_T\" in ImageJ \"sample_view_top_controls\"","title":"To access the top camera"},{"location":"SPEC_commands/","text":"SPEC- ID4B \u00b6 Welcome to ID4B SPEC command \u00b6 SPEC Detailed Descriptions For full documentation visit certif.com . In ID4B, we used several SPEC along with python and C written by Dr. Jacob Ruff . \"spec is internationally recognized as the leading software for instrument control and data acquisition in X-ray diffraction experiments.\" Few important commands are shown below. SPEC Commands for ID4B More detaiils can be found in SPEC manual and ID4B-SPEC Examples. Important SPEC commands \u00b6 mkdir - Create a new directotry. a2scan - two-motor scan. abscan - incident-reflected angle scan. br - br and ubr - move to the reciprocal space coordinates (HKL). ca - calculate motor settings for a given point in reciprocal space cal - calculate motor settings for a given point in reciprocal space cat - UNIX shell cat command cd - change working directory cmAX - Compumotor AX motor controller config - edit the hardware configuration config_adm - configuration - administer hardware configuration file constant - define a constant global symbol counting - timer/scaler commands, macros and variables cscan - Continuous Scans ct - count and print results dscan/lup - motor scan relative to the starting position d2scan - two-motor scan relative to the starting positions def - def and rdef - define a macro disable - disable and enable - Disable and Enable Hardware do - execute a command file dtscan - relative temperature scan dxp - XIA DXP CAMAC MCA encode - encode()/decode() - data stream manipulation epics - EPICS specific functions files - conventions for file/device output flow - flow control flyscan - Continuous Scans with Multichannel Scalers fourc - 4-circle geometry modes funcs - functions - built-in functions global - declare global variables getE - get the energy getroi - get the region of interest hbeamscan - Horizontal direction beam scan based on start, finish, interval and time arrguments history - command recall facility hklscan - general linear scan in reciprocal space hscan - scan along the H-axis in reciprocal space install - spec installation procedure l - UNIX file listing libedit - libedit/readline - command line recall and editing lm - list motor software limits ls - UNIX file listing lscan - scan along the L-axis in reciprocal space lup chi - motor 'chi' scan relative to the starting position lup th - motor 'th' scan relative to the starting position lup tth - motor 'two theta' scan relative to the starting position lup phi - motor 'phi' scan relative to the starting position macros - description of macro facility matchUE - match undulator energy maxk - maximum position at k reciprocal space wm monchi - where is monochromator chi mk / umk - move to the reciprocal space coordinates (HKL) mono - monochromator - monochromator control macros motors - commands and functions for controlling motors move_info - move_info() - returns what would happen on a move moveE - move the energy mr - move to a given angle of specular reflection mv - mv and umv - move one motor mvd - move a motor in dial units mvr - mvr and umvr - move a single motor relative to its current position umv th CEN - move theta motor to center mond - monocromator d posiiron montrav - monochromator in trnasverse direction newvbeam - new beam position based on vertical beam or horizontal beam scan newfile - data file management newmac - re-read the standard macro definitions nu - ??????? or0 - or1 - or_swap - os1 - optical slit 1 position to 0 os2 - optical slit 1 position to 0 pwd - print spec's current working directory pa - park6m - park the 6M PILATUS detector to 175m (x), 924.5m (y) and 200m (z) in directions pil_von - PILATUS video on pil_voff - PILATUS video off pil_setdir - PILATUS set directory pil_setup PIL6 - PILATUS setup pil_settrig \"Internal\" - pil_unsetup 0 - PILATUS unset pl_xMAX - show the maximum value of the plot in x-direction plotselect pilroi - plot select PILATUS ROI qdo - execute a command file without echo quickfly - quick_collect - rscan - specular reflectivity scan r2scan - reflectivity background scans readline - libedit/readline - command line recall and editing resume - continue an aborted scan roi - region of Interest counters samz - moving sample z direction scans - scans and scans.4 - read data from ASCII spec data format scan files server - spec server/client - issue commands and control hardware remotely set - define the user angle of a motor setfilter - set filter set_dial - define the dial position of a motor setlat - set lattice set_lm - set lower and upper software limits set_sim - set simulate (no hardware) mode setplot - set plotting options setpowder - configure powder-averaged scans setscans - configure scan options showtemp - display the current temperature sharpopt - sixc - 6-circle geometry modes spec - spec, fourc, twoc, surf, etc. - X-ray diffractometer operation for specific configurations spec_menu - spec_menu() - create interactive menu from specifications spec_par - spec_par() - sets internal parameters splot - plot the plotselect of specific values syncE - synchronize E tw tabzd tabzui tabzuo - tewak table te - read or set the temperature teramp - ramp the temperature to a new set point tscan - temperature scan th2th - theta two theta scan tw - \"tweak\" motors tweakup - scan the monochromator in d direction (mond), go to the midlle and scan the undulator and move to the highest position unkludgenu - ?????? vi - invokes the standard UNIX visual editor vscan - Variable Step Size Scans vbeamscan - Vertical direction beam scan based on start, finish, interval and time arrguments w - wait for moving and counting and then beep wa - list all motor positions wait - wait() - synchronization with moving, counting and other activity wfilter - where is filters wideopt - diftabx - diffractometer movement in x directions diftabz - diffractometer movement in z directions wh - where, principal axes and reciprocal space whats - identify what an object is wm - print information about one or more motors wmono - where is monochromatic beam wmonoall - where motor and their position including the motors, phi and filters wmonoall - where is mirror position wot - where is optical tables ws1 - where is first slit ws2 - where is second slit w6m - where is 6M detector wslits - where is both slit 1 and slit 2 If you encounter any new commands during your sample run, please send an email and we will add that to the list .","title":"ID4B-SPEC commands"},{"location":"SPEC_commands/#spec-id4b","text":"","title":"SPEC- ID4B"},{"location":"SPEC_commands/#welcome-to-id4b-spec-command","text":"SPEC Detailed Descriptions For full documentation visit certif.com . In ID4B, we used several SPEC along with python and C written by Dr. Jacob Ruff . \"spec is internationally recognized as the leading software for instrument control and data acquisition in X-ray diffraction experiments.\" Few important commands are shown below. SPEC Commands for ID4B More detaiils can be found in SPEC manual and ID4B-SPEC Examples.","title":"Welcome to ID4B SPEC command"},{"location":"SPEC_commands/#important-spec-commands","text":"mkdir - Create a new directotry. a2scan - two-motor scan. abscan - incident-reflected angle scan. br - br and ubr - move to the reciprocal space coordinates (HKL). ca - calculate motor settings for a given point in reciprocal space cal - calculate motor settings for a given point in reciprocal space cat - UNIX shell cat command cd - change working directory cmAX - Compumotor AX motor controller config - edit the hardware configuration config_adm - configuration - administer hardware configuration file constant - define a constant global symbol counting - timer/scaler commands, macros and variables cscan - Continuous Scans ct - count and print results dscan/lup - motor scan relative to the starting position d2scan - two-motor scan relative to the starting positions def - def and rdef - define a macro disable - disable and enable - Disable and Enable Hardware do - execute a command file dtscan - relative temperature scan dxp - XIA DXP CAMAC MCA encode - encode()/decode() - data stream manipulation epics - EPICS specific functions files - conventions for file/device output flow - flow control flyscan - Continuous Scans with Multichannel Scalers fourc - 4-circle geometry modes funcs - functions - built-in functions global - declare global variables getE - get the energy getroi - get the region of interest hbeamscan - Horizontal direction beam scan based on start, finish, interval and time arrguments history - command recall facility hklscan - general linear scan in reciprocal space hscan - scan along the H-axis in reciprocal space install - spec installation procedure l - UNIX file listing libedit - libedit/readline - command line recall and editing lm - list motor software limits ls - UNIX file listing lscan - scan along the L-axis in reciprocal space lup chi - motor 'chi' scan relative to the starting position lup th - motor 'th' scan relative to the starting position lup tth - motor 'two theta' scan relative to the starting position lup phi - motor 'phi' scan relative to the starting position macros - description of macro facility matchUE - match undulator energy maxk - maximum position at k reciprocal space wm monchi - where is monochromator chi mk / umk - move to the reciprocal space coordinates (HKL) mono - monochromator - monochromator control macros motors - commands and functions for controlling motors move_info - move_info() - returns what would happen on a move moveE - move the energy mr - move to a given angle of specular reflection mv - mv and umv - move one motor mvd - move a motor in dial units mvr - mvr and umvr - move a single motor relative to its current position umv th CEN - move theta motor to center mond - monocromator d posiiron montrav - monochromator in trnasverse direction newvbeam - new beam position based on vertical beam or horizontal beam scan newfile - data file management newmac - re-read the standard macro definitions nu - ??????? or0 - or1 - or_swap - os1 - optical slit 1 position to 0 os2 - optical slit 1 position to 0 pwd - print spec's current working directory pa - park6m - park the 6M PILATUS detector to 175m (x), 924.5m (y) and 200m (z) in directions pil_von - PILATUS video on pil_voff - PILATUS video off pil_setdir - PILATUS set directory pil_setup PIL6 - PILATUS setup pil_settrig \"Internal\" - pil_unsetup 0 - PILATUS unset pl_xMAX - show the maximum value of the plot in x-direction plotselect pilroi - plot select PILATUS ROI qdo - execute a command file without echo quickfly - quick_collect - rscan - specular reflectivity scan r2scan - reflectivity background scans readline - libedit/readline - command line recall and editing resume - continue an aborted scan roi - region of Interest counters samz - moving sample z direction scans - scans and scans.4 - read data from ASCII spec data format scan files server - spec server/client - issue commands and control hardware remotely set - define the user angle of a motor setfilter - set filter set_dial - define the dial position of a motor setlat - set lattice set_lm - set lower and upper software limits set_sim - set simulate (no hardware) mode setplot - set plotting options setpowder - configure powder-averaged scans setscans - configure scan options showtemp - display the current temperature sharpopt - sixc - 6-circle geometry modes spec - spec, fourc, twoc, surf, etc. - X-ray diffractometer operation for specific configurations spec_menu - spec_menu() - create interactive menu from specifications spec_par - spec_par() - sets internal parameters splot - plot the plotselect of specific values syncE - synchronize E tw tabzd tabzui tabzuo - tewak table te - read or set the temperature teramp - ramp the temperature to a new set point tscan - temperature scan th2th - theta two theta scan tw - \"tweak\" motors tweakup - scan the monochromator in d direction (mond), go to the midlle and scan the undulator and move to the highest position unkludgenu - ?????? vi - invokes the standard UNIX visual editor vscan - Variable Step Size Scans vbeamscan - Vertical direction beam scan based on start, finish, interval and time arrguments w - wait for moving and counting and then beep wa - list all motor positions wait - wait() - synchronization with moving, counting and other activity wfilter - where is filters wideopt - diftabx - diffractometer movement in x directions diftabz - diffractometer movement in z directions wh - where, principal axes and reciprocal space whats - identify what an object is wm - print information about one or more motors wmono - where is monochromatic beam wmonoall - where motor and their position including the motors, phi and filters wmonoall - where is mirror position wot - where is optical tables ws1 - where is first slit ws2 - where is second slit w6m - where is 6M detector wslits - where is both slit 1 and slit 2 If you encounter any new commands during your sample run, please send an email and we will add that to the list .","title":"Important SPEC commands"},{"location":"SPEC_macros/","text":"Welcome to SPEC macros \u00b6 NOTE The code is written by Dr. Jacob Ruff based on SPEC certif.com . \"spec is internationally recognized as the leading software for instrument control and data acquisition in X-ray diffraction experiments.\" In ID4B, SPEC code is used along with python and C commands. ID4B beamline specific macros are shown below. Important SPEC commands for ID4B \u00b6 userlist.mac - Important macos needed for the users, delaied descrispotion are shown below. ``JRs_useful_macros.mac`` # generate SPEC macros for beam, motor and slit positions plotlast.mac # generate?? undulator_macro.mac # undulator stability syncmon.mac # syncronoze the system fmbo_filter.mac # filter macros digio.mac # diti? set_and_get_rois.mac # set ROI channels multi_pilatus_v5.mac # detector Lakeshore336cryocool.mac # Temperature macros energy_pv.mac # Energy macros undulator_2A.mac # Undulator stablibility macros Detailed description of macros The codes are in github repository Detailed description of macros \u00b6 JRs_useful_macros.mac 1. Define a macro vbeamscan based on passing four arrguments start, finish, interval and time parameter scans 2. Define a macro newbeam based on passing four arrguments start, finish, interval and time parameter scans 3. Define a macro hbeamscan based on passing four arrguments start, finish, interval and time parameter scans 4. Define a macro monocromator position def wmono 'wm monu mond monoff montrav mond_x monzu monzd monxu monxd' 5. Define a macro for mirror posiiton def wmirror 'wm mird miru mirbd mirbu' 6. Define a macro for optical table 7. Define a macro for slit position 8. Define a macro for tweakup the monochromator d position wby scanning both mond and undulator motors 9. Define where is 6M detectors 10. Define how to park the 6M detector","title":"SPEC macro"},{"location":"SPEC_macros/#welcome-to-spec-macros","text":"NOTE The code is written by Dr. Jacob Ruff based on SPEC certif.com . \"spec is internationally recognized as the leading software for instrument control and data acquisition in X-ray diffraction experiments.\" In ID4B, SPEC code is used along with python and C commands. ID4B beamline specific macros are shown below.","title":"Welcome to SPEC macros"},{"location":"SPEC_macros/#important-spec-commands-for-id4b","text":"userlist.mac - Important macos needed for the users, delaied descrispotion are shown below. ``JRs_useful_macros.mac`` # generate SPEC macros for beam, motor and slit positions plotlast.mac # generate?? undulator_macro.mac # undulator stability syncmon.mac # syncronoze the system fmbo_filter.mac # filter macros digio.mac # diti? set_and_get_rois.mac # set ROI channels multi_pilatus_v5.mac # detector Lakeshore336cryocool.mac # Temperature macros energy_pv.mac # Energy macros undulator_2A.mac # Undulator stablibility macros Detailed description of macros The codes are in github repository","title":"Important SPEC commands for ID4B"},{"location":"SPEC_macros/#detailed-description-of-macros","text":"JRs_useful_macros.mac 1. Define a macro vbeamscan based on passing four arrguments start, finish, interval and time parameter scans 2. Define a macro newbeam based on passing four arrguments start, finish, interval and time parameter scans 3. Define a macro hbeamscan based on passing four arrguments start, finish, interval and time parameter scans 4. Define a macro monocromator position def wmono 'wm monu mond monoff montrav mond_x monzu monzd monxu monxd' 5. Define a macro for mirror posiiton def wmirror 'wm mird miru mirbd mirbu' 6. Define a macro for optical table 7. Define a macro for slit position 8. Define a macro for tweakup the monochromator d position wby scanning both mond and undulator motors 9. Define where is 6M detectors 10. Define how to park the 6M detector","title":"Detailed description of macros"},{"location":"about/","text":"Authors : User Guide of <QM> 2 beamline Staff scitients at CHESS ID4B Date: 2023-5-4","title":"About"},{"location":"beam_dump/","text":"After beam come back from long beam dump \u00b6 Step 1: check the current Step 2: After it stabilized Step 3: Check the shutter Step 4: Check the IC1 Step 5: If you have singnal, some values Step 6: press 3 in stkechy_mostab Step 7: Use mostab go maximum IC2 Step 8: Go to maximum IC1 Step 9: press 1 in stkechy_mostab","title":"Beam dump"},{"location":"beam_dump/#after-beam-come-back-from-long-beam-dump","text":"Step 1: check the current Step 2: After it stabilized Step 3: Check the shutter Step 4: Check the IC1 Step 5: If you have singnal, some values Step 6: press 3 in stkechy_mostab Step 7: Use mostab go maximum IC2 Step 8: Go to maximum IC1 Step 9: press 1 in stkechy_mostab","title":"After beam come back from long beam dump"},{"location":"beamline_setup/","text":"Beamline Startup \u00b6 Parameters of the beamline \u00b6 Attibutes Specifications Available techniques HDRM, REXS Source CHESS compact Undulator Brilliance ?? ph/s/0.1%bw/mm^2 Current 100 mA Energy range 7-52 KeV Energy resolution Maximum flux Resolution power Monochromator DCM Diamond Focusing mirror Silicon with Rh coated Detection mode Transmission Detector Pilatus 6M Spot size 200 microns x 500 microns Time to take the data HRDM ~ 20 mins General steps \u00b6 Instruction for nomachine \u00b6 Please click the link for nomachine connection in your system. Instruction for Globus \u00b6 Please click the link for data transfer. show_apms 1 show_apms 2 show_apms 3","title":"Beamline setup"},{"location":"beamline_setup/#beamline-startup","text":"","title":"Beamline Startup"},{"location":"beamline_setup/#parameters-of-the-beamline","text":"Attibutes Specifications Available techniques HDRM, REXS Source CHESS compact Undulator Brilliance ?? ph/s/0.1%bw/mm^2 Current 100 mA Energy range 7-52 KeV Energy resolution Maximum flux Resolution power Monochromator DCM Diamond Focusing mirror Silicon with Rh coated Detection mode Transmission Detector Pilatus 6M Spot size 200 microns x 500 microns Time to take the data HRDM ~ 20 mins","title":"Parameters of the beamline"},{"location":"beamline_setup/#general-steps","text":"","title":"General steps"},{"location":"beamline_setup/#instruction-for-nomachine","text":"Please click the link for nomachine connection in your system.","title":"Instruction for nomachine"},{"location":"beamline_setup/#instruction-for-globus","text":"Please click the link for data transfer. show_apms 1 show_apms 2 show_apms 3","title":"Instruction for Globus"},{"location":"cryocooler/","text":"Cryocoolers \u00b6 The cryocooler is manufactured by CYRO Industries of America, Inc. . Close-circle cryostats are installed in <QM> 2 allowing samples to be comprehensively studied in a wide range of temperatures from 12K to 500K. The cryocooler can operate both helium (12K to 300K) and nitrogen gas (300K to 500K ) using a single stream flow. In-house nitrogen and helium gas are used for cryocoolers. Just by switching the knob outside of the hutch, the gas supply can be altered. The external tip-heater prevents frost and maintains a dry tip that helps to create an ice-free sample environment at low temperatures. A platinum temperature sensor is installed to control the low alarm setting temperature that triggers back the temperature controller to energize and maintain the ice-free environment. The main component of the cryostat can be divided into five different components: (i) source : the refrigerator or the cryostat act as a source to cool a reliable cryogenic temperature for a long continuous periods (ii) compressor (iii) PID temperature controller : Cryogenic temperature controlled Model 336 manufactured by Lake Shore is used. The controller\u2019s zone tuning feature allows you to measure and control temperatures seamlessly from 300 mK to over 1,500 K by automatically switching temperature sensor inputs [1]. (iv) Power supply : 30 V digital and 24V DC are used (v) Gas flow controller : The digital flow automatically control and displays the flow rate Gas flow parameters Helium gas : Normal flow rate is between 8 \u2013 12 liters/min, typically 11 l/min Nitrogen gas : Normal flow rate is between 8 \u2013 12 liters/min, typically 9 l/min. Safety Do not touch the cold helium and nitrogen gas stream. Exposure to the skin of the cold gas could result in severe injuries. The dewar system has pressure relief protection installed. Do not remove pressure reliefs or check valves. Motors Motor Commands Comments Temperature controller sampleT Set the temperature To open the lakeshore \u00b6 Open terminal css The Lakeshore controller will open Output (1(input A): stage 1 heater, 2(input C): Sample temperature, 3 (input B): Stage 2 heater ), you can control. Change the Range : Rang3/High Practical guide of the temperature switch between nitrogen and helium Temperature change guideline","title":"Cryocooler"},{"location":"cryocooler/#cryocoolers","text":"The cryocooler is manufactured by CYRO Industries of America, Inc. . Close-circle cryostats are installed in <QM> 2 allowing samples to be comprehensively studied in a wide range of temperatures from 12K to 500K. The cryocooler can operate both helium (12K to 300K) and nitrogen gas (300K to 500K ) using a single stream flow. In-house nitrogen and helium gas are used for cryocoolers. Just by switching the knob outside of the hutch, the gas supply can be altered. The external tip-heater prevents frost and maintains a dry tip that helps to create an ice-free sample environment at low temperatures. A platinum temperature sensor is installed to control the low alarm setting temperature that triggers back the temperature controller to energize and maintain the ice-free environment. The main component of the cryostat can be divided into five different components: (i) source : the refrigerator or the cryostat act as a source to cool a reliable cryogenic temperature for a long continuous periods (ii) compressor (iii) PID temperature controller : Cryogenic temperature controlled Model 336 manufactured by Lake Shore is used. The controller\u2019s zone tuning feature allows you to measure and control temperatures seamlessly from 300 mK to over 1,500 K by automatically switching temperature sensor inputs [1]. (iv) Power supply : 30 V digital and 24V DC are used (v) Gas flow controller : The digital flow automatically control and displays the flow rate Gas flow parameters Helium gas : Normal flow rate is between 8 \u2013 12 liters/min, typically 11 l/min Nitrogen gas : Normal flow rate is between 8 \u2013 12 liters/min, typically 9 l/min. Safety Do not touch the cold helium and nitrogen gas stream. Exposure to the skin of the cold gas could result in severe injuries. The dewar system has pressure relief protection installed. Do not remove pressure reliefs or check valves. Motors Motor Commands Comments Temperature controller sampleT Set the temperature","title":"Cryocoolers"},{"location":"cryocooler/#to-open-the-lakeshore","text":"Open terminal css The Lakeshore controller will open Output (1(input A): stage 1 heater, 2(input C): Sample temperature, 3 (input B): Stage 2 heater ), you can control. Change the Range : Rang3/High Practical guide of the temperature switch between nitrogen and helium Temperature change guideline","title":"To open the lakeshore"},{"location":"detector_information/","text":"Detectors \u00b6 Pilatus 6M Pilatus6 100K Pilatus8 100K Technical Details \u00b6 Pilatus 6M \u00b6 The large (W 590 x H 603 x D 455 mm 3 ) Dectris Pilatus 6-megapixel photon counting detector shown above. The 6M high-dynamic-range hybrid pixel array detector was designed by Paul Scherrer Institute and sold by Dectris. The 6M Pilatus3 X series single photon counting detector has unprecedented count rate, direct detection of x-ray in single-photon-sensitivity, higher dynamic range (no dark current and no readout noise), higher frame rate, higher maximum count rate, millions of pixels and room temperature operations to reveal the weak features associated with Bragg peaks in diffuse scattering. The Pilatus 6M detector have pixel size of 172x172 \u00b5m\u00b2, 2463x2527 pixel array, 423.6 x 434.6 mm\u00b2 active area, 100 Hz frame rate, 20-bit/pixel dynamic range, count rate 10 ph/s/pixel and readout time of 0.95 ms [ 1 ]. Figure : Scattering data from Pilatus 6M taken by Dr. Ruff at <QM> 2 Table 1 : Detector Paramters Attibutes Specifications Dectector 6M Pilatus3 pixel size 172x172 \u00b5m\u00b2 pixel array 2463x2527 active area 423.6 x 434.6 mm\u00b2 Frame rate 100 Hz Dynamic range 20-bit/pixel count rate 10 ph/s/pixel readout time 0.95 ms Table 2 : Pilatus commands Motor Commands Comments PILATUS 6 PIL6 Pilatus 6M detector PILATUS 6 Pil6my Move pilatus 6M detector in Y direction PILATUS 6 Pil6mz Move pilatus 6M detector in Y direction PILATUS 6 Pilroi Pilatus 6M detector region of interest Pilatus6 100K \u00b6 The link for the technical details are here Pilatus8 100K and Pilatus6 100K \u00b6","title":"Detector"},{"location":"detector_information/#detectors","text":"Pilatus 6M Pilatus6 100K Pilatus8 100K","title":"Detectors"},{"location":"detector_information/#technical-details","text":"","title":"Technical Details"},{"location":"detector_information/#pilatus-6m","text":"The large (W 590 x H 603 x D 455 mm 3 ) Dectris Pilatus 6-megapixel photon counting detector shown above. The 6M high-dynamic-range hybrid pixel array detector was designed by Paul Scherrer Institute and sold by Dectris. The 6M Pilatus3 X series single photon counting detector has unprecedented count rate, direct detection of x-ray in single-photon-sensitivity, higher dynamic range (no dark current and no readout noise), higher frame rate, higher maximum count rate, millions of pixels and room temperature operations to reveal the weak features associated with Bragg peaks in diffuse scattering. The Pilatus 6M detector have pixel size of 172x172 \u00b5m\u00b2, 2463x2527 pixel array, 423.6 x 434.6 mm\u00b2 active area, 100 Hz frame rate, 20-bit/pixel dynamic range, count rate 10 ph/s/pixel and readout time of 0.95 ms [ 1 ]. Figure : Scattering data from Pilatus 6M taken by Dr. Ruff at <QM> 2 Table 1 : Detector Paramters Attibutes Specifications Dectector 6M Pilatus3 pixel size 172x172 \u00b5m\u00b2 pixel array 2463x2527 active area 423.6 x 434.6 mm\u00b2 Frame rate 100 Hz Dynamic range 20-bit/pixel count rate 10 ph/s/pixel readout time 0.95 ms Table 2 : Pilatus commands Motor Commands Comments PILATUS 6 PIL6 Pilatus 6M detector PILATUS 6 Pil6my Move pilatus 6M detector in Y direction PILATUS 6 Pil6mz Move pilatus 6M detector in Y direction PILATUS 6 Pilroi Pilatus 6M detector region of interest","title":"Pilatus 6M"},{"location":"detector_information/#pilatus6-100k","text":"The link for the technical details are here","title":"Pilatus6 100K"},{"location":"detector_information/#pilatus8-100k-and-pilatus6-100k","text":"","title":"Pilatus8 100K and Pilatus6 100K"},{"location":"diffractometer/","text":"Huber diffractometer \u00b6 Huber \u201cpsi\u201d diffractometer is installed at CHESS ID4B. Due to four sample-orientation axes and two detector-orientation axes, the psi-circle diffractometer is also known as \u201c4S+2D\". The independent motion sample and detector orientation provide nine degrees of freedom to define any vertical diffraction plane.The angle calculations for this diffractometer were shown in the reference [1] [2]. The motor names are shown below in Table 1. Reference [1] H. You, J. Appl. Cryst.(1999).32, 614-623 and [2] W. R. & Levy, H. A. (1967). Acta Cryst. 22, 457\u2013464 Table 1 : Names of the six-circle Huber Diffractometer's motor Motor Commands Comments 2-Theta tth horizontal axis for detector arm Theta th horizontal axis for sample Chi chi sample motor Phi phi sample motor Nu nu vertical axis for detector, only for psic Mu mu vertical axis for sample, only for psic X-direction samplex sample motor x-direction Y-direction sampley sample motor y-direction Z-direction samplez sample motor z-direction Table 2 : Motor range and accuracy Motor Range (deg) Accuracy (arcsec) Spheres of confusion Comments Theta -10/+90? 0.18? 30? vertical theta Delta 0.18? 30? vertical 2theta mu -- 0.18? 30? horizontal theta gamma -- 0.18? 30? horizontal two theta Chi -- 0.18? 30? with and without cryostat Phi -- 0.18? 30?","title":"Diffractometer"},{"location":"diffractometer/#huber-diffractometer","text":"Huber \u201cpsi\u201d diffractometer is installed at CHESS ID4B. Due to four sample-orientation axes and two detector-orientation axes, the psi-circle diffractometer is also known as \u201c4S+2D\". The independent motion sample and detector orientation provide nine degrees of freedom to define any vertical diffraction plane.The angle calculations for this diffractometer were shown in the reference [1] [2]. The motor names are shown below in Table 1. Reference [1] H. You, J. Appl. Cryst.(1999).32, 614-623 and [2] W. R. & Levy, H. A. (1967). Acta Cryst. 22, 457\u2013464 Table 1 : Names of the six-circle Huber Diffractometer's motor Motor Commands Comments 2-Theta tth horizontal axis for detector arm Theta th horizontal axis for sample Chi chi sample motor Phi phi sample motor Nu nu vertical axis for detector, only for psic Mu mu vertical axis for sample, only for psic X-direction samplex sample motor x-direction Y-direction sampley sample motor y-direction Z-direction samplez sample motor z-direction Table 2 : Motor range and accuracy Motor Range (deg) Accuracy (arcsec) Spheres of confusion Comments Theta -10/+90? 0.18? 30? vertical theta Delta 0.18? 30? vertical 2theta mu -- 0.18? 30? horizontal theta gamma -- 0.18? 30? horizontal two theta Chi -- 0.18? 30? with and without cryostat Phi -- 0.18? 30?","title":"Huber diffractometer"},{"location":"energy_change/","text":"Start the new users at the beamline \u00b6 newmac (# uploading all the macros ) userslist.mac cd Scripts/ ./newusers-4b.sh 2022-3 sarker-0000-a ( this will create file both in id4b and id4baux ) copy HRDMscans.mac to the specific folder FOURC > qdo ./HRDMscans.mac FOURC > newfile (name of newfile) Change the HDRMscans.mac file with _samplename and _sampledirectory Flux Calculator \u00b6 CHESS Flux calculator at the beamline X-ray absoption edge \u00b6 CHeck absroption edge flyscan \u00b6 flyscan_setup selecct motor using space check flyscan FOURC > powderscan 300 1 User HDRMScan details about the macros \u00b6 Energy change \u00b6 Removing mirror for higher energy calibrations \u00b6 ''' newfile wmirror umvr mird miru opens wot tw tabzd tabzui tabzuo ws2 wot wm diftabz tw tabzd tabzui tabzuo tw tabxd closes syncE ''' Energy calibrations \u00b6 ''' moveE 25 umvr mond matchUE 8 tweakup wm lup montrav -3 3 60 0.1 umv montrav 163.98 tweakup wm monchi Tw monchi lup monchi -0.5 0.5 20 0.1 plotselect ic2 diode splot Plotselect ic2 splot syncE plotselect ic2 diode splot umv monchi pl_xMAX getE wot ws1 tw tabzd tabzui tabzuo 1 1 1 tw tabxd .05 tweakup syncE moveE 30.6; matchUE 8 ''' Step I: * Cover the detector * Before energy change (> 30 keV higher to lower < 18 keV) verify counts in ic1, ic2 and diode ( getE : provide you the energy) Put mostab to 5 V Optimize counts ( tweakup ) syncE * Then try move energy and optimize mostab: moveE 11 matchUE 3 tweakup lup montrav * Open shuttur os1 4 4 * move the whole table up tw tabzu tabx tabzui 1 1 1 Get values in ic1 and ic2 put mirror wmirror Cryo * take out the stage * Go to chi 90 * put the new sample stage with pin (the pin should slide in the sample stage) * Put the cryostate : it will go only from one side shown in the below * there are 4 scrwes to hold that(8'32) * Config X, Y, Z (cryz, cryx, cryoy) * wm cryx cryy * check the phi and beamstop * * check cryoz wihth signal * up the resonance, so we should * tw crx .2, the crystal beam is there * restrict the phi * tw cry cetered * tw cryoy centered * ca 002 * umv tth 20.2 th 0 chi 90 * See signal * freeze phi -180 * ubr 2 -2 2 * cuts (not contunuously moving ) * phi is fixed, others are moving with ubr 2 -2 2 * FInd cryx cryy cryz (florescence) * Tw th * freeze phi -90 * ca 0 0 2 * calibration * ca 0 02 * ubr 0 0 2 * th2th -1 1 40 1 * opt2 (optimizing theta, phi and chi) * pa (got statistics) * ca 102 * ubr 1 0 2 * wh * ubr 1 0 2 * pil_voff * pil_on * check the fitter * th2th -2 2 60 1 * manually optimize * optimize theta, phi and chi * useful.mac \"cryocool to simitomo \" * config file : lakeshow1: kG1 * prdef measured temp * open temperature terminal : css (lakeshore controller) * File > lakeshoreopi > lakeshore1 * Lakeshore1.Kr00 (change range in the plot) * we need to remove the filter to see the magnetic peaks Tommorw : * Turn off the lakeshore * Wait for temperature to selle in * close the vaccum * SLowly break the vaccum (remove o-ring) * Give some time to settle in * Remove 4 scews remove the sample Detector setup \u00b6 REXS Setup : mv pil6mx 100 mv pil6my 760 mv pil6mx 100 - move pilatus 6M to 100 mm x direction mv pil6my 760 - move pilatus 6M to 760 mm y direction To take the detecotor all the way end of the hutch mv pil6mx 233 mv pil6my 885 mv pil6mx 233 - move pilatus 6M to 233 mm x direction mv pil6my 885 - move pilatus 6M to 885 mm y direction Change the config file \u00b6 open the terminal config config configaration will open Go to the specific motor change the required motor config press w control c reconfig To go to the specific motor press c,c (twice) shift+' to modify anything","title":"Energy change"},{"location":"energy_change/#start-the-new-users-at-the-beamline","text":"newmac (# uploading all the macros ) userslist.mac cd Scripts/ ./newusers-4b.sh 2022-3 sarker-0000-a ( this will create file both in id4b and id4baux ) copy HRDMscans.mac to the specific folder FOURC > qdo ./HRDMscans.mac FOURC > newfile (name of newfile) Change the HDRMscans.mac file with _samplename and _sampledirectory","title":"Start the new users at the beamline"},{"location":"energy_change/#flux-calculator","text":"CHESS Flux calculator at the beamline","title":"Flux Calculator"},{"location":"energy_change/#x-ray-absoption-edge","text":"CHeck absroption edge","title":"X-ray absoption edge"},{"location":"energy_change/#flyscan","text":"flyscan_setup selecct motor using space check flyscan FOURC > powderscan 300 1","title":"flyscan"},{"location":"energy_change/#user-hdrmscan-details-about-the-macros","text":"","title":"User HDRMScan details about the macros"},{"location":"energy_change/#energy-change","text":"","title":"Energy change"},{"location":"energy_change/#removing-mirror-for-higher-energy-calibrations","text":"''' newfile wmirror umvr mird miru opens wot tw tabzd tabzui tabzuo ws2 wot wm diftabz tw tabzd tabzui tabzuo tw tabxd closes syncE '''","title":"Removing mirror for higher energy calibrations"},{"location":"energy_change/#energy-calibrations","text":"''' moveE 25 umvr mond matchUE 8 tweakup wm lup montrav -3 3 60 0.1 umv montrav 163.98 tweakup wm monchi Tw monchi lup monchi -0.5 0.5 20 0.1 plotselect ic2 diode splot Plotselect ic2 splot syncE plotselect ic2 diode splot umv monchi pl_xMAX getE wot ws1 tw tabzd tabzui tabzuo 1 1 1 tw tabxd .05 tweakup syncE moveE 30.6; matchUE 8 ''' Step I: * Cover the detector * Before energy change (> 30 keV higher to lower < 18 keV) verify counts in ic1, ic2 and diode ( getE : provide you the energy) Put mostab to 5 V Optimize counts ( tweakup ) syncE * Then try move energy and optimize mostab: moveE 11 matchUE 3 tweakup lup montrav * Open shuttur os1 4 4 * move the whole table up tw tabzu tabx tabzui 1 1 1 Get values in ic1 and ic2 put mirror wmirror Cryo * take out the stage * Go to chi 90 * put the new sample stage with pin (the pin should slide in the sample stage) * Put the cryostate : it will go only from one side shown in the below * there are 4 scrwes to hold that(8'32) * Config X, Y, Z (cryz, cryx, cryoy) * wm cryx cryy * check the phi and beamstop * * check cryoz wihth signal * up the resonance, so we should * tw crx .2, the crystal beam is there * restrict the phi * tw cry cetered * tw cryoy centered * ca 002 * umv tth 20.2 th 0 chi 90 * See signal * freeze phi -180 * ubr 2 -2 2 * cuts (not contunuously moving ) * phi is fixed, others are moving with ubr 2 -2 2 * FInd cryx cryy cryz (florescence) * Tw th * freeze phi -90 * ca 0 0 2 * calibration * ca 0 02 * ubr 0 0 2 * th2th -1 1 40 1 * opt2 (optimizing theta, phi and chi) * pa (got statistics) * ca 102 * ubr 1 0 2 * wh * ubr 1 0 2 * pil_voff * pil_on * check the fitter * th2th -2 2 60 1 * manually optimize * optimize theta, phi and chi * useful.mac \"cryocool to simitomo \" * config file : lakeshow1: kG1 * prdef measured temp * open temperature terminal : css (lakeshore controller) * File > lakeshoreopi > lakeshore1 * Lakeshore1.Kr00 (change range in the plot) * we need to remove the filter to see the magnetic peaks Tommorw : * Turn off the lakeshore * Wait for temperature to selle in * close the vaccum * SLowly break the vaccum (remove o-ring) * Give some time to settle in * Remove 4 scews remove the sample","title":"Energy calibrations"},{"location":"energy_change/#detector-setup","text":"REXS Setup : mv pil6mx 100 mv pil6my 760 mv pil6mx 100 - move pilatus 6M to 100 mm x direction mv pil6my 760 - move pilatus 6M to 760 mm y direction To take the detecotor all the way end of the hutch mv pil6mx 233 mv pil6my 885 mv pil6mx 233 - move pilatus 6M to 233 mm x direction mv pil6my 885 - move pilatus 6M to 885 mm y direction","title":"Detector setup"},{"location":"energy_change/#change-the-config-file","text":"open the terminal config config configaration will open Go to the specific motor change the required motor config press w control c reconfig To go to the specific motor press c,c (twice) shift+' to modify anything","title":"Change the config file"},{"location":"gas_flow/","text":"Gas flow control \u00b6 It is important to control icing or heating by modifying nitrogen or helium gas flow. Follow the below steps to change the gas flow Automated gas flowrate change: talk to the staff scientist FOURC> flow_set <number> FOURC> flow_get Manually change the flowrate Step 1 : Press ENT in the gas flow meter Step 2 : Press up or down arraow to change the number (right now it is showing 9.04 liter/min in the above gas flow meter) Step 3 : Right or left arrow will take you to the desired digits Step 4 : Press ENT again in the gas flow meter, it will go show the desired final values Step 4 : If you don't need to change anything, press ESC","title":"Gas flow control"},{"location":"gas_flow/#gas-flow-control","text":"It is important to control icing or heating by modifying nitrogen or helium gas flow. Follow the below steps to change the gas flow Automated gas flowrate change: talk to the staff scientist FOURC> flow_set <number> FOURC> flow_get Manually change the flowrate Step 1 : Press ENT in the gas flow meter Step 2 : Press up or down arraow to change the number (right now it is showing 9.04 liter/min in the above gas flow meter) Step 3 : Right or left arrow will take you to the desired digits Step 4 : Press ENT again in the gas flow meter, it will go show the desired final values Step 4 : If you don't need to change anything, press ESC","title":"Gas flow control"},{"location":"introduction/","text":"Introduction \u00b6 The layout of the CHESS ID4B beamline is shown in the figure above. For more details see the beamline paper (soon to be published). This document is categorized into three sections. User Guide : This is the most useful section for the ID4B beamline users. Here, the users can gather information about SPEC commands to run their samples in the beamline. This includes sample alignment details and data analysis steps. In addition, this section also includes information on the beamline equipment. Admin documents : This section is used for administrative purposes. However, you can find information about proposal details, and computational configurations (nomachine and globus setup) in the beamline setup section. Frequently Ask Questions (FAQ) : This section includes FAQs in the beamline before, during, and after the run. Please read the questions and answers, you might find yours!!","title":"Introduction"},{"location":"introduction/#introduction","text":"The layout of the CHESS ID4B beamline is shown in the figure above. For more details see the beamline paper (soon to be published). This document is categorized into three sections. User Guide : This is the most useful section for the ID4B beamline users. Here, the users can gather information about SPEC commands to run their samples in the beamline. This includes sample alignment details and data analysis steps. In addition, this section also includes information on the beamline equipment. Admin documents : This section is used for administrative purposes. However, you can find information about proposal details, and computational configurations (nomachine and globus setup) in the beamline setup section. Frequently Ask Questions (FAQ) : This section includes FAQs in the beamline before, during, and after the run. Please read the questions and answers, you might find yours!!","title":"Introduction"},{"location":"nexpy/","text":"Nexpy \u00b6 The code provides various tools for stacking the raw data, finding Bragg peaks, solving orientation matrix, and finally providing the HKL. The results are visible to NeXpy GUI . Recommendation to take a look at data visulization package Nexpy visulization Documentation Steps to use the NexPy at beamline \u00b6 Step 1 : Open the Nexpy \u00b6 Terminal > ssh -Y lnx1034-f1 Terminal > nexpy & Terminal > ssh lnx306 Step 2 : Take a look at the priliminary data after data collection \u00b6 Step1 : Go to 'File' tab Step 2 : Go to 'Import' tab Step 3: Go to 'Import image stack' Step 4: Go to desired file location Step 5: Select the folder (it will not show any images) Step 6: Select the images (mostly 50/100 images) Double clicked the stack images Go to the signal and click log scale Go to z tab and press forward (it will go through the images)","title":"NeXpy"},{"location":"nexpy/#nexpy","text":"The code provides various tools for stacking the raw data, finding Bragg peaks, solving orientation matrix, and finally providing the HKL. The results are visible to NeXpy GUI . Recommendation to take a look at data visulization package Nexpy visulization Documentation","title":"Nexpy"},{"location":"nexpy/#steps-to-use-the-nexpy-at-beamline","text":"","title":"Steps to use the NexPy at beamline"},{"location":"nexpy/#step-1-open-the-nexpy","text":"Terminal > ssh -Y lnx1034-f1 Terminal > nexpy & Terminal > ssh lnx306","title":" Step 1 : Open the Nexpy"},{"location":"nexpy/#step-2-take-a-look-at-the-priliminary-data-after-data-collection","text":"Step1 : Go to 'File' tab Step 2 : Go to 'Import' tab Step 3: Go to 'Import image stack' Step 4: Go to desired file location Step 5: Select the folder (it will not show any images) Step 6: Select the images (mostly 50/100 images) Double clicked the stack images Go to the signal and click log scale Go to z tab and press forward (it will go through the images)","title":" Step 2  : Take a look at the priliminary data after data collection"},{"location":"publications/","text":"<QM> 2 list of publications \u00b6 (please click the paper to see the details) Tsung-Han Yang, S Kawamoto, Tomoya Higo, SuYin Grass Wang, MB Stone, Joerg Neuefeind, Jacob PC Ruff, AM Milinda Abeykoon, Yu-Sheng Chen, S Nakatsuji, and KW Plumb. \"Bond ordering and molecular spin-orbital fluctuations in the cluster Mott insulator GaTa4Se8.\" Phys. Rev. Research 4, 033123 (2022) Linus Kautzsch, Yuzki M Oey, Hong Li, Zheng Ren, Brenden R Ortiz, Ram Seshadri, Jacob Ruff, Ziqiang Wang, Ilija Zeljkovic, and Stephen D Wilson. \u201cIncommensurate charge-stripe correlations in the kagome superconductor CsV3Sb5\u2212xSnx\u201d arXiv:2207.10608 (2022) Jordan Venderley, Krishnanand Mallayya, Michael Matty, Matthew Krogstad, Jacob Ruff, Geoff Pleiss, Varsha Kishore, David Mandrus, Daniel Phelan, Lekhanath Poudel, Andrew Gordon Wilson, Kilian Weinberger, Puspa Upreti, Michael Norman, Stephan Rosenkranz, Raymond Osborn, and Eun-Ah Kim. \u201cHarnessing interpretable and unsupervised machine learning to address big data from modern X-ray diffraction.\u201d PNAS 119, 24, e2109665119 (2022) Ganesh Pokharel, Brenden Ortiz, Paul Sarte, Linus Kautzsch, Guang Wu, Jacob Ruff, and Stephen D Wilson. \u201cHighly anisotropic magnetism in the vanadium-based kagome metal TbV6Sn6.\u201d arXiv:2205.15559 (2022) Cheng Chen, Xiang Chen, Weichen Tang, Zhenglu Li, Siqi Wang, Shuhan Ding, Chris Jozwiak, Aaron Bostwick, Eli Rotenberg, Makoto Hashimoto, Donghui Lu, Jacob PC Ruff, Steven G Louie, Robert Birgeneau, Yulin Chen, Yao Wang, and Yu He. \u201cLattice fluctuation induced pseudogap in quasi-one-dimensional Ta2NiSe5.\u201darXiv:2203.06817 (2022) Jason J Huang, Daniel Weinstock, Hayley Hirsh, Ryan Bouck, Minghao Zhang, Oleg Yu Gorobtsov, Malia Okamura, Ross Harder, Wonsuk Cha, Jacob PC Ruff, Y Shirley Meng, and Andrej Singer. \u201cDisorder Dynamics in Battery Nanoparticles During Phase Transitions Revealed by Operando Single-Particle Diffraction.\u201d Adv. Energy Mater. 12, 2103521 (2022). Lv, B. Q., Alfred Zong, D. Wu, A. V. Rozhkov, Boris V. Fine, Su-Di Chen, Makoto Hashimoto et al. \"Unconventional hysteretic transition in a charge density wave.\" Phys. Rev. Lett. 128, 3, 036401 (2022). S. Sharma, M. Pocrnic, B. N. Richtik, C. R. Wiebe, J. Beare, J. Gautreau, J. P. Clancy, J. P. C. Ruff, M. Pula, Q. Chen, S. Yoon, Y. Cai, and G. M. Luke. \u201cSynthesis and physical and magnetic properties of CuAlCr4S8: A Cr-based breathing pyrochlore.\u201d Phys. Rev. B 106, 024407 (2022) Daniel Weinstock, Hayley S Hirsh, Oleg Yu Gorobtsov, Minghao Zhang, Jason Huang, Ryan Bouck, Jacob PC Ruff, Y Shirley Meng, and Andrej Singer. \u201cStructure-selective operando x-ray spectroscopy.\u201d ACS Energy Letters 7, 1, 261\u2013266 (2021) Brenden R Ortiz, Samuel ML Teicher, Linus Kautzsch, Paul M Sarte, Noah Ratcliff, John Harter, Jacob PC Ruff, Ram Seshadri, and Stephen D Wilson. \"Fermi surface mapping and the nature of charge density wave order in the kagome superconductor CsV3Sb5.\" Phys. Rev. X 11, 041030 (2021). Xu, Su-Yang, Qiong Ma, Yang Gao, Anshul Kogar, Alfred Zong, Andr\u00e9s M. Mier Valdivia, Thao H. Dinh et al. \"Spontaneous gyrotropic electronic order in a transition-metal dichalcogenide.\" Nature 578, no. 7796 545-549 (2020) Antonio, Daniel J., Joel T. Weiss, Katherine S. Shanks, Jacob PC Ruff, Marcelo Jaime, Andres Saul, Thomas Swinburne et al. \"Piezomagnetic switching and complex phase equilibria in uranium dioxide.\" Communications Materials 2, no. 1 1-6 (2021): Lee, Jooseop, Karel Proke\u0161, Sohee Park, Igor Zaliznyak, Sachith Dissanayake, Masaaki Matsuda, Matthias Frontzek et al. \"Charge density wave with anomalous temperature dependence in UPt2Si2.\" Physical Review B 102, no. 4 041112 (2020) Jiang, Yu-Xiao, Jia-Xin Yin, M. Michael Denner, Nana Shumiya, Brenden R. Ortiz, Gang Xu, Zurab Guguchia et al. \"Unconventional chiral charge order in kagome superconductor KV3Sb5.\" Nature Materials, 1-5 (2021) Ghale, Purnima. \"Energy of non-relativistic many-particle quantum states from non-commuting Coulomb field and momentum operators. (2021) Shi, Zhenzhong, S. J. Kuhn, F. Flicker, T. Helm, J. Lee, William Steinhardt, Sachith Dissanayake et al. \"Incommensurate two-dimensional checkerboard charge density wave in the low-dimensional superconductor Ta4Pd3Te16.\" Physical Review Research 2, no. 4 042042 (2020) Thedford, R. Paxton, Peter A. Beaucage, Ethan M. Susca, Corson A. Chao, Katja C. Nowack, Robert B. Van Dover, Sol M. Gruner, and Ulrich Wiesner. \"Superconducting Quantum Metamaterials from High Pressure Melt Infiltration of Metals into Block Copolymer Double Gyroid Derived Ceramic Templates.\" Advanced Functional Materials 31, no. 23 2100469 (2021) Chen, Xiang, Yu He, Shan Wu, Yu Song, Dongsheng Yuan, Edith Bourret-Courchesne, Jacob PC Ruff, Zahirul Islam, Alex Frano, and Robert J. Birgeneau. \"Structural and magnetic transitions in the planar antiferromagnet Ba4Ir3O10.\" Physical Review B 103, no. 22 224420 (2021) Reig-i-Plessis, D., T. A. Johnson, K. Lu, Q. Chen, J. P. C. Ruff, M. H. Upton, T. J. Williams et al. \"Structural, electronic, and magnetic properties of nearly ideal Jeff= 1/2 iridium halides.\" Physical Review Materials 4, no. 12 124407 (2020) Gadkari, D., K. S. Shanks, H. T. Philipp, M. W. Tate, J. Thom-Levy, and S. M. Gruner. \"Characterization of an architecture for front-end pixel binning in an integrating pixel array detector.\" Journal of Instrumentation 15, no. 11 T11002 (2020)","title":"Publication"},{"location":"publications/#qm2-list-of-publications","text":"(please click the paper to see the details) Tsung-Han Yang, S Kawamoto, Tomoya Higo, SuYin Grass Wang, MB Stone, Joerg Neuefeind, Jacob PC Ruff, AM Milinda Abeykoon, Yu-Sheng Chen, S Nakatsuji, and KW Plumb. \"Bond ordering and molecular spin-orbital fluctuations in the cluster Mott insulator GaTa4Se8.\" Phys. Rev. Research 4, 033123 (2022) Linus Kautzsch, Yuzki M Oey, Hong Li, Zheng Ren, Brenden R Ortiz, Ram Seshadri, Jacob Ruff, Ziqiang Wang, Ilija Zeljkovic, and Stephen D Wilson. \u201cIncommensurate charge-stripe correlations in the kagome superconductor CsV3Sb5\u2212xSnx\u201d arXiv:2207.10608 (2022) Jordan Venderley, Krishnanand Mallayya, Michael Matty, Matthew Krogstad, Jacob Ruff, Geoff Pleiss, Varsha Kishore, David Mandrus, Daniel Phelan, Lekhanath Poudel, Andrew Gordon Wilson, Kilian Weinberger, Puspa Upreti, Michael Norman, Stephan Rosenkranz, Raymond Osborn, and Eun-Ah Kim. \u201cHarnessing interpretable and unsupervised machine learning to address big data from modern X-ray diffraction.\u201d PNAS 119, 24, e2109665119 (2022) Ganesh Pokharel, Brenden Ortiz, Paul Sarte, Linus Kautzsch, Guang Wu, Jacob Ruff, and Stephen D Wilson. \u201cHighly anisotropic magnetism in the vanadium-based kagome metal TbV6Sn6.\u201d arXiv:2205.15559 (2022) Cheng Chen, Xiang Chen, Weichen Tang, Zhenglu Li, Siqi Wang, Shuhan Ding, Chris Jozwiak, Aaron Bostwick, Eli Rotenberg, Makoto Hashimoto, Donghui Lu, Jacob PC Ruff, Steven G Louie, Robert Birgeneau, Yulin Chen, Yao Wang, and Yu He. \u201cLattice fluctuation induced pseudogap in quasi-one-dimensional Ta2NiSe5.\u201darXiv:2203.06817 (2022) Jason J Huang, Daniel Weinstock, Hayley Hirsh, Ryan Bouck, Minghao Zhang, Oleg Yu Gorobtsov, Malia Okamura, Ross Harder, Wonsuk Cha, Jacob PC Ruff, Y Shirley Meng, and Andrej Singer. \u201cDisorder Dynamics in Battery Nanoparticles During Phase Transitions Revealed by Operando Single-Particle Diffraction.\u201d Adv. Energy Mater. 12, 2103521 (2022). Lv, B. Q., Alfred Zong, D. Wu, A. V. Rozhkov, Boris V. Fine, Su-Di Chen, Makoto Hashimoto et al. \"Unconventional hysteretic transition in a charge density wave.\" Phys. Rev. Lett. 128, 3, 036401 (2022). S. Sharma, M. Pocrnic, B. N. Richtik, C. R. Wiebe, J. Beare, J. Gautreau, J. P. Clancy, J. P. C. Ruff, M. Pula, Q. Chen, S. Yoon, Y. Cai, and G. M. Luke. \u201cSynthesis and physical and magnetic properties of CuAlCr4S8: A Cr-based breathing pyrochlore.\u201d Phys. Rev. B 106, 024407 (2022) Daniel Weinstock, Hayley S Hirsh, Oleg Yu Gorobtsov, Minghao Zhang, Jason Huang, Ryan Bouck, Jacob PC Ruff, Y Shirley Meng, and Andrej Singer. \u201cStructure-selective operando x-ray spectroscopy.\u201d ACS Energy Letters 7, 1, 261\u2013266 (2021) Brenden R Ortiz, Samuel ML Teicher, Linus Kautzsch, Paul M Sarte, Noah Ratcliff, John Harter, Jacob PC Ruff, Ram Seshadri, and Stephen D Wilson. \"Fermi surface mapping and the nature of charge density wave order in the kagome superconductor CsV3Sb5.\" Phys. Rev. X 11, 041030 (2021). Xu, Su-Yang, Qiong Ma, Yang Gao, Anshul Kogar, Alfred Zong, Andr\u00e9s M. Mier Valdivia, Thao H. Dinh et al. \"Spontaneous gyrotropic electronic order in a transition-metal dichalcogenide.\" Nature 578, no. 7796 545-549 (2020) Antonio, Daniel J., Joel T. Weiss, Katherine S. Shanks, Jacob PC Ruff, Marcelo Jaime, Andres Saul, Thomas Swinburne et al. \"Piezomagnetic switching and complex phase equilibria in uranium dioxide.\" Communications Materials 2, no. 1 1-6 (2021): Lee, Jooseop, Karel Proke\u0161, Sohee Park, Igor Zaliznyak, Sachith Dissanayake, Masaaki Matsuda, Matthias Frontzek et al. \"Charge density wave with anomalous temperature dependence in UPt2Si2.\" Physical Review B 102, no. 4 041112 (2020) Jiang, Yu-Xiao, Jia-Xin Yin, M. Michael Denner, Nana Shumiya, Brenden R. Ortiz, Gang Xu, Zurab Guguchia et al. \"Unconventional chiral charge order in kagome superconductor KV3Sb5.\" Nature Materials, 1-5 (2021) Ghale, Purnima. \"Energy of non-relativistic many-particle quantum states from non-commuting Coulomb field and momentum operators. (2021) Shi, Zhenzhong, S. J. Kuhn, F. Flicker, T. Helm, J. Lee, William Steinhardt, Sachith Dissanayake et al. \"Incommensurate two-dimensional checkerboard charge density wave in the low-dimensional superconductor Ta4Pd3Te16.\" Physical Review Research 2, no. 4 042042 (2020) Thedford, R. Paxton, Peter A. Beaucage, Ethan M. Susca, Corson A. Chao, Katja C. Nowack, Robert B. Van Dover, Sol M. Gruner, and Ulrich Wiesner. \"Superconducting Quantum Metamaterials from High Pressure Melt Infiltration of Metals into Block Copolymer Double Gyroid Derived Ceramic Templates.\" Advanced Functional Materials 31, no. 23 2100469 (2021) Chen, Xiang, Yu He, Shan Wu, Yu Song, Dongsheng Yuan, Edith Bourret-Courchesne, Jacob PC Ruff, Zahirul Islam, Alex Frano, and Robert J. Birgeneau. \"Structural and magnetic transitions in the planar antiferromagnet Ba4Ir3O10.\" Physical Review B 103, no. 22 224420 (2021) Reig-i-Plessis, D., T. A. Johnson, K. Lu, Q. Chen, J. P. C. Ruff, M. H. Upton, T. J. Williams et al. \"Structural, electronic, and magnetic properties of nearly ideal Jeff= 1/2 iridium halides.\" Physical Review Materials 4, no. 12 124407 (2020) Gadkari, D., K. S. Shanks, H. T. Philipp, M. W. Tate, J. Thom-Levy, and S. M. Gruner. \"Characterization of an architecture for front-end pixel binning in an integrating pixel array detector.\" Journal of Instrumentation 15, no. 11 T11002 (2020)","title":"&#60;QM&#62;2 list of publications"},{"location":"pymca/","text":"PyMca \u00b6 PyMca is developed by European Synchrotron Radiation Facility (ESRF). You can visulize and analyze the energy-dispersive X-ray fluorescence data. It access SPEC shared memory to monitor data acquisation. The user can see their plots in pyMCA. For more information visit PyMca website","title":"pyMCA"},{"location":"pymca/#pymca","text":"PyMca is developed by European Synchrotron Radiation Facility (ESRF). You can visulize and analyze the energy-dispersive X-ray fluorescence data. It access SPEC shared memory to monitor data acquisation. The user can see their plots in pyMCA. For more information visit PyMca website","title":"PyMca"},{"location":"sample/","text":"The procedure of mounting/changing the sample depends on the type of experiment performed ID4B. Single-crystal mounts \u00b6 Step 1 : You need goniometer-bases link for the base : B5 (SPINE Style) Goniometer Bases SKU: GB-B5-R-20 Step 2 : Micromount : MiTeGen is used for micromount pin. It is composed of thin polymer tips attached to beveled non-magnetic 0.025\u2033 (0.64 mm) diameter stainless steel rods (pins). Below is the link for the sample tip SKU: M2-L18SP-100 and the aperture Size is 100 \u03bcm. Step 3 : Do not touch the tips with your hands. Always use tweezers along the pin shaft, not the tip. Step 4 : Use GE vernish to glue the micromount to base Step 5 : Make sure you do not tunch the metal part with the sample!! Thin-film mounts \u00b6 Step 1 : You need goniometer-bases link for the base : B5 (SPINE Style) Goniometer Bases SKU: GB-B5-R-20 Step 2 : Fiber glass Sample shipment details \u00b6 If you want to send the samples to CHESS, please follow the instructions here Air sensitive samples \u00b6 If coating needed, one of the example could be this","title":"Sample mount"},{"location":"sample/#single-crystal-mounts","text":"Step 1 : You need goniometer-bases link for the base : B5 (SPINE Style) Goniometer Bases SKU: GB-B5-R-20 Step 2 : Micromount : MiTeGen is used for micromount pin. It is composed of thin polymer tips attached to beveled non-magnetic 0.025\u2033 (0.64 mm) diameter stainless steel rods (pins). Below is the link for the sample tip SKU: M2-L18SP-100 and the aperture Size is 100 \u03bcm. Step 3 : Do not touch the tips with your hands. Always use tweezers along the pin shaft, not the tip. Step 4 : Use GE vernish to glue the micromount to base Step 5 : Make sure you do not tunch the metal part with the sample!!","title":"Single-crystal mounts"},{"location":"sample/#thin-film-mounts","text":"Step 1 : You need goniometer-bases link for the base : B5 (SPINE Style) Goniometer Bases SKU: GB-B5-R-20 Step 2 : Fiber glass","title":"Thin-film mounts"},{"location":"sample/#sample-shipment-details","text":"If you want to send the samples to CHESS, please follow the instructions here","title":"Sample shipment details"},{"location":"sample/#air-sensitive-samples","text":"If coating needed, one of the example could be this","title":"Air sensitive samples"},{"location":"sample_alignment_HDRM/","text":"Welcome to CHESS <QM> 2 Sample Alignment \u00b6 High Dynamic Range Reciprocal Space Mapping (HDRM) Basic Theory - HDRM \u00b6 High Dynamic Range Mapping (HDRM) is primarily a method for studying single crystal samples, although it can also be effective for studying thin films. HDRM aims is to rapidly study wide regions of reciprocal space, collecting the intense Bragg peaks required to refine crystal structures along with weak features associated with superstructures, and the slowly modulated scattering associated with phonons and short-range order[ 1 ]. Single Crytal Alignment Basic steps for single crystal sample alignment - HDRM Step 1: Center the sample to the beam \u00b6 FOURC> umvr samz 0.1 (relative motion of the sample movement up (+) and down (-)) FOURC> umv phi 0 FOURC> umv phi 180 Move x and y to make the sample to the cursor FOURC> umv phi 90 FOURC> umv phi 270 Do it iteratively until the center of the axis match the sample position Step 2 : Create file structure \u00b6 a) Create newfile FOURC>newfile <samplename> # samplename : chemical name of your sample, make sure you created folder in your directory b) Open HDRMscans.mac script and sort your path (sortmypathout) i) Change the _mysample = <sample_identifier> # _mysample is the sample identifier # save the file check the signals Step 3: Run HDRMscans.mac script from terminal \u00b6 FOURC> qdo ./HDRMscans.mac # Notes: HDRMscans.mac contains all the script Step 4 : If you want to check the best height for the sample (finding smaller sample best position) \u00b6 FOURC>heightscan a) Data will save at 'tiff' folder inside the user folder at id4b b) Check the quality of the datasets at nexpy b) Go to the best position of the sample Step 5: Run three rotation crystal scan \u00b6 It will rotate the crystal three times at different chi and theta angle FOURC> threextalscan 300 1 #Notes: In the threextalscan 1st parameter is temperature 300K and the second parameter is waiting time 1 min - It will vary chi, theta and phi angle - Collect data phi 0-365 with 3650 images (1 degree/frame) - You can the change the exposure time (if needed) a) Data will save at raw6M in id4b folder Step 6: Check data nexpy \u00b6 Please look at the Data visualization - Nexpy section ============================================================================= Temperature modify and collect data Change temperature from 300K and 90 K- (if you are at Nitrogen atomosphere) \u00b6 FOURC> te 100 # note: temperature here is 100 Kelvin Make sure the temperature is stable before you run script FOURC> threextalscan 100 1 Practical guide of the temperature switch between nitrogen and helium Click the link for details Nitrogen --> Helium and Helium --> Nitrogen \u00b6 ============================================================================= Thin-film Alignment Basic steps for single crystal thin-film sample alignment - HDRM. Detector height needs to change because of grazing incidence. Make sure you are able to see the samples (proper light arrangements) Step 1: Center the sample to the beam a) Move chi, phi, and theta positions to their initial setup FOURC> umv chi 90 FOURC> umv phi 0 FOURC> umv th 0 b) Perform height adjustment Check the signal at the diode FOURC> tw samz 0.01 Move the sample in the Z-directions and cut the beam in half (for example: if the beam size is 300 microns, move 150 microns from the surface when the signal goes down) c) Place cursor at center of the sample FOURC> umv phi 0 FOURC> umv phi 180 FOURC> umv phi 90 FOURC> umv phi 270 Step 2 : Creating the file structure a) Create newfile FOURC>newfile samplename b) Open HDRMscans.mac script for thin-film Change the sample ID Step 3: Run HDRMscans.mac script from terminal FOURC> qdo ./HDRMscans.mac #Notes:HDRMscans.mac contains all the script Step 3: Check the best height for the sample it will generate tiff file FOURC>powderscan 300 1 a) Check the quality of the data sets at nexpy b) Go to the best position of the sample Step 4: Run three rotation crystal scan FOURC> threxstalscan 300 1 #Notes: Parameters: Temperature = 300, Sleep = 1 Step 5: Check data nexpy ( please look at the Data visulization - Nexpy section )","title":"HDRM"},{"location":"sample_alignment_HDRM/#welcome-to-chess-qm2-sample-alignment","text":"High Dynamic Range Reciprocal Space Mapping (HDRM)","title":"Welcome to CHESS &#60;QM&#62;2 Sample Alignment"},{"location":"sample_alignment_HDRM/#basic-theory-hdrm","text":"High Dynamic Range Mapping (HDRM) is primarily a method for studying single crystal samples, although it can also be effective for studying thin films. HDRM aims is to rapidly study wide regions of reciprocal space, collecting the intense Bragg peaks required to refine crystal structures along with weak features associated with superstructures, and the slowly modulated scattering associated with phonons and short-range order[ 1 ]. Single Crytal Alignment Basic steps for single crystal sample alignment - HDRM","title":"Basic Theory - HDRM"},{"location":"sample_alignment_HDRM/#step-1-center-the-sample-to-the-beam","text":"FOURC> umvr samz 0.1 (relative motion of the sample movement up (+) and down (-)) FOURC> umv phi 0 FOURC> umv phi 180 Move x and y to make the sample to the cursor FOURC> umv phi 90 FOURC> umv phi 270 Do it iteratively until the center of the axis match the sample position","title":"Step 1:  Center the sample to the beam "},{"location":"sample_alignment_HDRM/#step-2-create-file-structure","text":"a) Create newfile FOURC>newfile <samplename> # samplename : chemical name of your sample, make sure you created folder in your directory b) Open HDRMscans.mac script and sort your path (sortmypathout) i) Change the _mysample = <sample_identifier> # _mysample is the sample identifier # save the file check the signals","title":"Step 2 :  Create file structure "},{"location":"sample_alignment_HDRM/#step-3-run-hdrmscansmac-script-from-terminal","text":"FOURC> qdo ./HDRMscans.mac # Notes: HDRMscans.mac contains all the script","title":"Step 3: Run HDRMscans.mac script from terminal "},{"location":"sample_alignment_HDRM/#step-4-if-you-want-to-check-the-best-height-for-the-sample-finding-smaller-sample-best-position","text":"FOURC>heightscan a) Data will save at 'tiff' folder inside the user folder at id4b b) Check the quality of the datasets at nexpy b) Go to the best position of the sample","title":"Step 4 : If you want to check the best height for the sample (finding smaller sample best position) "},{"location":"sample_alignment_HDRM/#step-5-run-three-rotation-crystal-scan","text":"It will rotate the crystal three times at different chi and theta angle FOURC> threextalscan 300 1 #Notes: In the threextalscan 1st parameter is temperature 300K and the second parameter is waiting time 1 min - It will vary chi, theta and phi angle - Collect data phi 0-365 with 3650 images (1 degree/frame) - You can the change the exposure time (if needed) a) Data will save at raw6M in id4b folder","title":"Step 5: Run three rotation crystal scan "},{"location":"sample_alignment_HDRM/#step-6-check-data-nexpy","text":"Please look at the Data visualization - Nexpy section ============================================================================= Temperature modify and collect data","title":"Step 6: Check data nexpy  "},{"location":"sample_alignment_HDRM/#change-temperature-from-300k-and-90-k-if-you-are-at-nitrogen-atomosphere","text":"FOURC> te 100 # note: temperature here is 100 Kelvin Make sure the temperature is stable before you run script FOURC> threextalscan 100 1 Practical guide of the temperature switch between nitrogen and helium Click the link for details Nitrogen --> Helium and Helium --> Nitrogen","title":"Change temperature from 300K and 90 K- (if you are at Nitrogen atomosphere)"},{"location":"sample_alignment_HDRM/#_1","text":"============================================================================= Thin-film Alignment Basic steps for single crystal thin-film sample alignment - HDRM. Detector height needs to change because of grazing incidence. Make sure you are able to see the samples (proper light arrangements) Step 1: Center the sample to the beam a) Move chi, phi, and theta positions to their initial setup FOURC> umv chi 90 FOURC> umv phi 0 FOURC> umv th 0 b) Perform height adjustment Check the signal at the diode FOURC> tw samz 0.01 Move the sample in the Z-directions and cut the beam in half (for example: if the beam size is 300 microns, move 150 microns from the surface when the signal goes down) c) Place cursor at center of the sample FOURC> umv phi 0 FOURC> umv phi 180 FOURC> umv phi 90 FOURC> umv phi 270 Step 2 : Creating the file structure a) Create newfile FOURC>newfile samplename b) Open HDRMscans.mac script for thin-film Change the sample ID Step 3: Run HDRMscans.mac script from terminal FOURC> qdo ./HDRMscans.mac #Notes:HDRMscans.mac contains all the script Step 3: Check the best height for the sample it will generate tiff file FOURC>powderscan 300 1 a) Check the quality of the data sets at nexpy b) Go to the best position of the sample Step 4: Run three rotation crystal scan FOURC> threxstalscan 300 1 #Notes: Parameters: Temperature = 300, Sleep = 1 Step 5: Check data nexpy ( please look at the Data visulization - Nexpy section )","title":""},{"location":"sample_alignment_REXS/","text":"Resonant Elastic X-ray Scattering (REXS) Number of elements in the periodic table (K and L edges) Basic Theory - REXS \u00b6 Basic steps for sample alignments - REXS \u00b6 Beamsplitting polarimeter \u00b6 The polarization analyzer isolates and measures a unique series of diffraction resonances at the different K-edge. Important SPEC commands for REXS \u00b6 Opening and closing the shutter opens - Opening the shutter closes - Closing the shutter Pilatus video on and off pil_von - Turn pilatus video 'on' pil_voff - Turn pilatus video 'off' Position of the displex wm cryx - where motor for displex in 'x' directions wm cryy - where motor for displex in 'y' directions wm cryy - where motor for displex in 'y' directions Get the height correct for the sample opens; lup cryz -0.4 0.4 20 0.2; closes - open the shutter and perform the sample scan in the z directions umv cryz CEN - it will go to the center position Get the theta correct for the sample umv th 10 - Move theta to 10 degrees opens; lup cryz -0.4 0.4 20 0.2; closes - open the shutter and perform the sample scan in the z directions Calulate the motor position in a given point in the reciprocal space setlat - set lattice paramter information (a, b, c, alpha, beta, gamma) pa - it will show the orientation matrix ca - calculate motor settings for a given point in reciprocal space ca 0 0 20 - Calculate the theta, 2theta, chi, and phi for the structural peak (0 0 20) br - br and ubr - move to the reciprocal space coordinates (HKL) ubr 0 0 20 - Go to the peak (0 0 20) or0 0 0 20 - To put the peaks (0 0 20) as first element of the orientation matrix or1 0 0 18 - To put the peaks (0 0 18) as first element of the orientation matrix Moving energy above and below the resonance, perform energyscan moveE 11.216 - move the energy for the sample Ir L edge getE - Get energy matchUE 3 - the undulator 3rd harmonic match with the energy lscan L-0.1 L+0.1 50 0.5 or lscan 19.9 20.1 50 0.5 - Lscan in a range of 0.2, with 50 steps, and 0.5 sec/step timescan 5 - it is a timescan with 1 datapoint in 5 seconds opens; EUQscan 11.2 11.24 40 3 3; closes : Energyscan to get the edge Moving the energy to the off-resonance moveE 11.23 - Moves to 11.23 keV from current energy matchUE 3 - the undulator 3rd harmonic match with the energy, the h k l values will be different than the previous one ubr H K L - the previous h k l values carried by H K L, we need to do ubr H K L wh - where is every position getE - it gies current energy information ROI information getroi - provide information about the roi chosen in the area detector based on the direction beam position, i.e., xmin, ymin, xsize, ysize. setroi 278 67 1 3 - Changing the vertical and horizontal sizes. Examples: 278 and 67 are minimum pixel dimension along x (vertical) and y (horizontal) axis whereas 1 is vertical pixel size (it is minimum) and 3 is horizontal pixel size. After setiing up the two peaks, you can set up the macros to optimize the peak positions def alignfine ' opens lup chi -0.2 0.2 50 0.1 umv chi CEN lup th -0.05 0.05 50 0.1 umv th CEN lup tth -0.1 0.1 50 0.1 umv tth CEN lup th -0.03 0.03 30 0.1 umv th CEN lup tth -0.1 0.1 50 0.1 umv tth CEN lup chi -0.2 0.2 50 0.1 umv chi CEN closes wh \u2018 To permform the L scan for (0 1 17) peaks def getlscan ' wh opens lscan 16.96 17.04 120 1 closes moveE 11.20 matchUE 3 ubr H K L opens lscan 16.96 17.04 120 1 closes moveE 11.215 matchUE 3 \u2018 Perform two theta plan def gettthscan2 \u2018 wh alignfine opens lup cryz -0.2 0.2 40 0.1 umv cryz CEN alignfine opens th2th -0.04 0.04 80 1 closes \u2018","title":"REXS"},{"location":"sample_alignment_REXS/#basic-theory-rexs","text":"","title":"Basic Theory - REXS"},{"location":"sample_alignment_REXS/#basic-steps-for-sample-alignments-rexs","text":"","title":"Basic steps for sample alignments - REXS"},{"location":"sample_alignment_REXS/#beamsplitting-polarimeter","text":"The polarization analyzer isolates and measures a unique series of diffraction resonances at the different K-edge.","title":"Beamsplitting polarimeter"},{"location":"sample_alignment_REXS/#important-spec-commands-for-rexs","text":"Opening and closing the shutter opens - Opening the shutter closes - Closing the shutter Pilatus video on and off pil_von - Turn pilatus video 'on' pil_voff - Turn pilatus video 'off' Position of the displex wm cryx - where motor for displex in 'x' directions wm cryy - where motor for displex in 'y' directions wm cryy - where motor for displex in 'y' directions Get the height correct for the sample opens; lup cryz -0.4 0.4 20 0.2; closes - open the shutter and perform the sample scan in the z directions umv cryz CEN - it will go to the center position Get the theta correct for the sample umv th 10 - Move theta to 10 degrees opens; lup cryz -0.4 0.4 20 0.2; closes - open the shutter and perform the sample scan in the z directions Calulate the motor position in a given point in the reciprocal space setlat - set lattice paramter information (a, b, c, alpha, beta, gamma) pa - it will show the orientation matrix ca - calculate motor settings for a given point in reciprocal space ca 0 0 20 - Calculate the theta, 2theta, chi, and phi for the structural peak (0 0 20) br - br and ubr - move to the reciprocal space coordinates (HKL) ubr 0 0 20 - Go to the peak (0 0 20) or0 0 0 20 - To put the peaks (0 0 20) as first element of the orientation matrix or1 0 0 18 - To put the peaks (0 0 18) as first element of the orientation matrix Moving energy above and below the resonance, perform energyscan moveE 11.216 - move the energy for the sample Ir L edge getE - Get energy matchUE 3 - the undulator 3rd harmonic match with the energy lscan L-0.1 L+0.1 50 0.5 or lscan 19.9 20.1 50 0.5 - Lscan in a range of 0.2, with 50 steps, and 0.5 sec/step timescan 5 - it is a timescan with 1 datapoint in 5 seconds opens; EUQscan 11.2 11.24 40 3 3; closes : Energyscan to get the edge Moving the energy to the off-resonance moveE 11.23 - Moves to 11.23 keV from current energy matchUE 3 - the undulator 3rd harmonic match with the energy, the h k l values will be different than the previous one ubr H K L - the previous h k l values carried by H K L, we need to do ubr H K L wh - where is every position getE - it gies current energy information ROI information getroi - provide information about the roi chosen in the area detector based on the direction beam position, i.e., xmin, ymin, xsize, ysize. setroi 278 67 1 3 - Changing the vertical and horizontal sizes. Examples: 278 and 67 are minimum pixel dimension along x (vertical) and y (horizontal) axis whereas 1 is vertical pixel size (it is minimum) and 3 is horizontal pixel size. After setiing up the two peaks, you can set up the macros to optimize the peak positions def alignfine ' opens lup chi -0.2 0.2 50 0.1 umv chi CEN lup th -0.05 0.05 50 0.1 umv th CEN lup tth -0.1 0.1 50 0.1 umv tth CEN lup th -0.03 0.03 30 0.1 umv th CEN lup tth -0.1 0.1 50 0.1 umv tth CEN lup chi -0.2 0.2 50 0.1 umv chi CEN closes wh \u2018 To permform the L scan for (0 1 17) peaks def getlscan ' wh opens lscan 16.96 17.04 120 1 closes moveE 11.20 matchUE 3 ubr H K L opens lscan 16.96 17.04 120 1 closes moveE 11.215 matchUE 3 \u2018 Perform two theta plan def gettthscan2 \u2018 wh alignfine opens lup cryz -0.2 0.2 40 0.1 umv cryz CEN alignfine opens th2th -0.04 0.04 80 1 closes \u2018","title":"Important SPEC commands for REXS"},{"location":"sample_env/","text":"Sample environment \u00b6 If you want to use different sample environment or special equipments, please contact beamline scientist. Users setup at the beamline If you want to run your sample in different environment, please contact us. Attibutes Specifications Sample type Powder, Thin-film","title":"Sample environment"},{"location":"sample_env/#sample-environment","text":"If you want to use different sample environment or special equipments, please contact beamline scientist. Users setup at the beamline If you want to run your sample in different environment, please contact us. Attibutes Specifications Sample type Powder, Thin-film","title":"Sample environment"},{"location":"temp/","text":"Practical guide of the temperature switch between nitrogen and helium \u00b6 Consult beamline scientist before changing any temperatures \u00b6 Cooling temperature of cryocooler with N 2 : room temperature 300K --> 95K Step 1 : Open the N 2 valve and close He valve Step 2 : FOURC > prepnitrogen (# it will setup the temperature in the Lakeshore controller) Step 3 : FOURC > te 170 (# lowering temperature to 170K) Please use Helium sensibly! Cooling temperature of cryocooler with He : 85K --> 13K (also if you want only room temperature 300K and 15K) (change to N 2 to He flow) Step 1 : Please let CHESS operator know about changing the gas flow from N 2 to He Step 2 : FOURC > te 220 (# it will setup the temperature in the Lakeshore controller) Step 3 : Turn on the He valve and close N2 valve together Step 4 : FOURC > runninghelium (# it will setup the temperature in the Lakeshore controller) Step 5 : Wait for base temperature (Input A ~5K Input C ~36K) to stabilize (look at the plot below) Step 6 : FOURC > te 15 (# lowering temperature to 13K or others) Heating temperature of cryocooler : 13K --> 85K (change to He to N 2 flow) Step 1 : FOURC > prepnitrogen (# it will setup the temperature setpoints 87K and 83K in the Lakeshore controller Input A and input C) Step 2 : FOURC > te 180 (# it will setup the desired sample temperature; here sample temperature is 180 K) Step 2 : Make sure all the temperature is above 77 K (Input A 87 K, Input B (sample temperature) and Input C 83K in PLD controller) Danger N 2 in all conditions should be above 77K (N 2 (channel A, B, C) --> all temperature-->77K) Step 3 : Once Input A, B and C are above 77K, then open the N2 valve and close He valve together Step 4 : FOURC > te 100 (# increase temperature to 100K or any other desired temperature) Performing experiment above room temperature : 300K --> 500K Step 1 : Make sure N2 valve is open and He is closed Step 2: FOURC > prephighT (# increase temperature to 1st and 2nd controller to 143K and 220K) Step 3 : Make sure in the controller 1 (Input A) and B (input C), it will to reach the temperature 143K and 220K. Step 4 : FOURC > te 400 (# increase temperature to 400K) Performing experiment from high temperature to room temperature : 500K --> 300K Step 1 : Make sure N2 valve is open and He is closed Step 2: FOURC > prepnitrogen (# increase temperature to 1st and 2nd controller to 87K and 82K) Step 3 : Make sure in the controller Input A and Input C, it will to reach the temperature 87K and 82K. Step 4 : FOURC > te 300 (# increase temperature to 300K) Turn off the temperature controller Step 1 : Heat the temperature 300K, 300K, 300K Step 2 : close the compressor Step 3 : Wait until go to the required temperature Step 4 : Close the valve Problem : Ice formation at low temperature \u00b6 a) Figure 1 : Check the distance between the cryo-stream and sample (it should be as close as possible) b) Figure 2 : Continuously rotate the phi umv phi 360; umv phi 0 at low temperature c) Figure 3 : Check the gas flow and if needed talk to the staff scientist FOURC> flow_set <number> FOURC> flow_get Problem : High temperature issues \u00b6 a) Figure 3 : Check the gas flow and if needed talk to the staff scientist Problem : Accidentally closed the temperature controller \u00b6 Step 1 : Open terminal and type StripTool Step 2 : Connect to epics PVs Need to connect to epics PVs that you want to monitor LAKESHORE2:KRDG0 LAKESHORE2:KRDG1 LAKESHORE2:KRDG2 y-axis click \u201cModify\u201d button (same y axis for all the curves)","title":"Temperature switch"},{"location":"temp/#practical-guide-of-the-temperature-switch-between-nitrogen-and-helium","text":"","title":"Practical guide of the temperature switch between nitrogen and helium"},{"location":"temp/#consult-beamline-scientist-before-changing-any-temperatures","text":"Cooling temperature of cryocooler with N 2 : room temperature 300K --> 95K Step 1 : Open the N 2 valve and close He valve Step 2 : FOURC > prepnitrogen (# it will setup the temperature in the Lakeshore controller) Step 3 : FOURC > te 170 (# lowering temperature to 170K) Please use Helium sensibly! Cooling temperature of cryocooler with He : 85K --> 13K (also if you want only room temperature 300K and 15K) (change to N 2 to He flow) Step 1 : Please let CHESS operator know about changing the gas flow from N 2 to He Step 2 : FOURC > te 220 (# it will setup the temperature in the Lakeshore controller) Step 3 : Turn on the He valve and close N2 valve together Step 4 : FOURC > runninghelium (# it will setup the temperature in the Lakeshore controller) Step 5 : Wait for base temperature (Input A ~5K Input C ~36K) to stabilize (look at the plot below) Step 6 : FOURC > te 15 (# lowering temperature to 13K or others) Heating temperature of cryocooler : 13K --> 85K (change to He to N 2 flow) Step 1 : FOURC > prepnitrogen (# it will setup the temperature setpoints 87K and 83K in the Lakeshore controller Input A and input C) Step 2 : FOURC > te 180 (# it will setup the desired sample temperature; here sample temperature is 180 K) Step 2 : Make sure all the temperature is above 77 K (Input A 87 K, Input B (sample temperature) and Input C 83K in PLD controller) Danger N 2 in all conditions should be above 77K (N 2 (channel A, B, C) --> all temperature-->77K) Step 3 : Once Input A, B and C are above 77K, then open the N2 valve and close He valve together Step 4 : FOURC > te 100 (# increase temperature to 100K or any other desired temperature) Performing experiment above room temperature : 300K --> 500K Step 1 : Make sure N2 valve is open and He is closed Step 2: FOURC > prephighT (# increase temperature to 1st and 2nd controller to 143K and 220K) Step 3 : Make sure in the controller 1 (Input A) and B (input C), it will to reach the temperature 143K and 220K. Step 4 : FOURC > te 400 (# increase temperature to 400K) Performing experiment from high temperature to room temperature : 500K --> 300K Step 1 : Make sure N2 valve is open and He is closed Step 2: FOURC > prepnitrogen (# increase temperature to 1st and 2nd controller to 87K and 82K) Step 3 : Make sure in the controller Input A and Input C, it will to reach the temperature 87K and 82K. Step 4 : FOURC > te 300 (# increase temperature to 300K) Turn off the temperature controller Step 1 : Heat the temperature 300K, 300K, 300K Step 2 : close the compressor Step 3 : Wait until go to the required temperature Step 4 : Close the valve","title":"Consult beamline scientist before changing any temperatures"},{"location":"temp/#problem-ice-formation-at-low-temperature","text":"a) Figure 1 : Check the distance between the cryo-stream and sample (it should be as close as possible) b) Figure 2 : Continuously rotate the phi umv phi 360; umv phi 0 at low temperature c) Figure 3 : Check the gas flow and if needed talk to the staff scientist FOURC> flow_set <number> FOURC> flow_get","title":"Problem : Ice formation at low temperature"},{"location":"temp/#problem-high-temperature-issues","text":"a) Figure 3 : Check the gas flow and if needed talk to the staff scientist","title":"Problem : High temperature issues"},{"location":"temp/#problem-accidentally-closed-the-temperature-controller","text":"Step 1 : Open terminal and type StripTool Step 2 : Connect to epics PVs Need to connect to epics PVs that you want to monitor LAKESHORE2:KRDG0 LAKESHORE2:KRDG1 LAKESHORE2:KRDG2 y-axis click \u201cModify\u201d button (same y axis for all the curves)","title":"Problem : Accidentally closed the temperature controller"}]}